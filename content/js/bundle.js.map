{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","content/data/meta.json","bundle.js","node_modules/browserify/node_modules/path-browserify/index.js","node_modules/browserify/node_modules/process/browser.js","src/World.coffee","src/actions.coffee","src/brain.coffee","src/brain/attacker.coffee","src/brain/defender.coffee","src/brain/human.coffee","src/bullet.coffee","src/input.coffee","src/main.coffee","src/status.coffee","src/team.coffee","src/unit.coffee","src/util.coffee","src/view.coffee"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","version",2,"process","normalizeArray","parts","allowAboveRoot","up","last","splice","unshift","filter","xs","res","push","splitPathRe","splitPath","filename","exec","slice","resolve","resolvedPath","resolvedAbsolute","arguments","path","cwd","TypeError","charAt","split","p","join","normalize","isAbsolute","trailingSlash","substr","paths","Array","prototype","index","relative","from","to","trim","arr","start","end","fromParts","toParts","Math","min","samePartsLength","outputParts","concat","sep","delimiter","dirname","result","root","dir","basename","ext","extname","str","len","this","_process",3,"cleanUpNextTick","draining","currentQueue","queue","queueIndex","drainQueue","timeout","setTimeout","run","clearTimeout","Item","fun","array","noop","nextTick","args","apply","title","browser","env","argv","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","binding","name","chdir","umask",4,"AttackerBrain","Bullet","DefenderBrain","HumanBrain","Input","Team","Unit","World","meta","util","container","viewsize","size1","b","base","core","defnum","gPause","gStart","humanBrain","j","k","len1","len2","len3","m","mapstr","memberNum","playerTeam","ref","ref1","ref2","ref3","ref4","v","x","y","size","input","size2","gridSize","resolution","resolution2","sizer","sizer2","gridSizer","sizerm","field","Uint8Array","dismap","Int32Array","team","replace","parseInt","mapsize","mapresolution","coredismap","coredirmap","enemydismap","setCoredismap","setCoredirmap","rand","addUnit","setEnemydismap","units","some","_this","gField","setupField","addChild","player","marker","setupPlayerMarker","setupStartView","setupPauseView","scene","init","transit","keys","removeChild","main","pause","gResult","len4","q","ref5","updateUnits","updateBullets","changePoint","point","offAll","setupResultView","phase","next","bind","cdm","d","indexify","len5","ref6","ref7","results","rx","ry","edm","ceil","pos","len6","results1","g","randf","ang","setupUnit","addBullet","setupBullet","bullets","hitCheck","floor","_","remove","uniq","fix","unit","poss","rad","getCollider","PI","cos","sin","vel","setupText","font","color","stylex","styley","text","PIXI","Text","fill","align","position","width","height","Graphics","lineStyle","drawRect","alpha","col","text2","text3","text4","beginFill","endFill","filters","BlurFilter","blur","isWin","draw","filter2","g2","type","moveTo","lineTo","scoreborad","scoreborad2","scoreboradUpdate","gs","blendMode","BLEND_MODES","ADD","p0x","p0y","drawCircle","p1x","p1y","p2x","p2y","p3x","p3y","hp","rotation","shotang","getNear","limit","r2","pow","atan2","p1","p2","r1","ti","update","id","removeflag","brain","removeList","location","reload","../content/data/meta","./brain/attacker","./brain/defender","./brain/human","./bullet","./input","./team","./unit","./util",5,"IDOL","MOVE","TOP","BOTTOM","LEFT","RIGHT","ATTACK","AIM","FOWARD",6,"Brain",7,"ACTION","extend","child","parent","ctor","constructor","key","hasProp","__super__","hasOwnProperty","superClass","prevacts","near","acts","angs","cand","cd","cdr","dis","dis2","index2","mind","mx","my","randArray","../actions","../brain","../util",8,"ed",9,10,"colls","rad45",11,"indexOf","item","domElement","buttons","keydown","keyup","mapper","mouseEvent","document","listener","keyMap",13,16,17,18,27,32,37,38,39,40,"keycode","status","String","fromCharCode","toLowerCase","Bacon","fromEventTarget","map","keyCode","merge","charCodeAt","onValue","forEach","button","clientX","clientY","btn","cb","onMouseDown","offMouseDown","onMouseUp","offMouseUp","transform","onDoubleClick","offDoubleClick","active","md","mu","onMouseMove","offMouseMove",12,"Main","View","view","world","loop","requestAnimationFrame","render","$","./World","./view","INIT","READY","ACTIVE","DEAD",14,"diff","max","eachMembers",15,"STATUS","fullhp","shotInterval","respawnCount","action","actions","shot","act","aimflag","moveflag","shotflag","./actions","./status","Utility","random","randRange","renderer","autoDetectRenderer","backgroundColor","antialias","body","append","Container","stats","Stats","setMode","style","right","top","updater","begin"],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","module.exports={\r\n  \"version\": \"0.0.1\"\r\n}",null,"// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// Split a filename into [root, dir, basename, ext], unix version\n// 'root' is just a slash, or nothing.\nvar splitPathRe =\n    /^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/;\nvar splitPath = function(filename) {\n  return splitPathRe.exec(filename).slice(1);\n};\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function(path) {\n  var result = splitPath(path),\n      root = result[0],\n      dir = result[1];\n\n  if (!root && !dir) {\n    // No dirname whatsoever\n    return '.';\n  }\n\n  if (dir) {\n    // It has a dirname, strip trailing slash\n    dir = dir.substr(0, dir.length - 1);\n  }\n\n  return root + dir;\n};\n\n\nexports.basename = function(path, ext) {\n  var f = splitPath(path)[2];\n  // TODO: make this comparison case-insensitive on windows?\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\n\nexports.extname = function(path) {\n  return splitPath(path)[3];\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n","// shim for using process in browser\n\nvar process = module.exports = {};\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = setTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    clearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        setTimeout(drainQueue, 0);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","path = require 'path'\r\nfs = require 'fs'\r\n\r\nutil = require './util'\r\nInput = require './input'\r\nUnit = require './unit'\r\nTeam = require './team'\r\nBullet = require './bullet'\r\nHumanBrain = require './brain/human'\r\nAttackerBrain = require './brain/attacker'\r\nDefenderBrain = require './brain/defender'\r\nmeta = require '../content/data/meta'\r\n\r\n\r\nclass World\r\n\r\n  constructor: (@container, @viewsize, @size = 32)->\r\n    @input = new Input\r\n    @size2 = @size * @size\r\n    @gridSize = @viewsize / @size\r\n\r\n    @resolution = 2\r\n    @resolution2 = @resolution * @resolution\r\n    @sizer = @size * @resolution\r\n    @sizer2 = @sizer * @sizer\r\n    @gridSizer = @viewsize / @sizerm\r\n\r\n    @field = new Uint8Array @size2\r\n    @dismap = new Int32Array @size2\r\n\r\n\r\n    playerTeam = 1\r\n    @team = []\r\n    base = [{}, {}]\r\n    core = [{}, {}]\r\n\r\n    mapstr = fs.readFileSync path.resolve(__dirname, '../content/data/field1.txt'), 'utf8'\r\n    mapstr = mapstr.replace /\\r*\\n/g, ''\r\n    for v, i in @field\r\n      @field[i] = parseInt mapstr.charAt(i)\r\n      x = i % @size\r\n      y = i / @size | 0\r\n      switch @field[i]\r\n        when 6 then base[0] = {x: x, y: y}\r\n        when 7 then base[1] = {x: x, y: y}\r\n        when 2 then core[0] = {x: x, y: y}\r\n        when 4 then core[1] = {x: x, y: y}\r\n\r\n    @team.push new Team(0, base[0], core[0], 0xffa000)\r\n    @team.push new Team(1, base[1], core[1], 0x00ffff)\r\n\r\n    for t, i in @team\r\n      t.mapsize = @size\r\n      t.mapresolution = @resolution\r\n      t.coredismap = new Int32Array @sizer2 \r\n      t.coredirmap = new Int32Array @sizer2\r\n      t.enemydismap = new Int32Array @sizer2\r\n      @setCoredismap t, @team[1 - i].core #TODO:\r\n      @setCoredirmap t, @team[1 - i].core\r\n      memberNum = if playerTeam is i then 3 else 4\r\n      defnum = if playerTeam is i then 2 else 1 + util.rand(3)\r\n      for k in [0...memberNum]\r\n        if k < defnum\r\n          b = new DefenderBrain t\r\n        else \r\n          b = new AttackerBrain t\r\n        u = new Unit i, t.base, b\r\n        @addUnit u\r\n\r\n    for t, i in @team\r\n      @setEnemydismap t, @team[1 - i].units\r\n\r\n    for v, i in @dismap\r\n      @dismap[i] = if [0, 6, 7, 8].some((v)=> @field[i] is v) then 1 else -1\r\n\r\n    @gField = @setupField()\r\n    @container.addChild @gField\r\n    \r\n    humanBrain = new HumanBrain @input\r\n    @player = new Unit playerTeam, @team[playerTeam].base, humanBrain\r\n    @addUnit @player\r\n\r\n    @marker = @setupPlayerMarker @player\r\n    @container.addChild @marker\r\n\r\n    gStart = @setupStartView()\r\n    @container.addChild gStart\r\n\r\n    gPause = @setupPauseView()\r\n\r\n    @scene = {}\r\n    @scene.init = =>\r\n      (transit)=>\r\n        if @input.keys['z']\r\n          @container.removeChild gStart\r\n          transit 'main'\r\n    \r\n    @scene.main = =>\r\n      pause = false\r\n      @input.on 'space', =>\r\n        pause = not pause\r\n        if pause\r\n          @container.addChild gPause\r\n        else\r\n          @container.removeChild gPause\r\n      (transit)=>\r\n        return if pause\r\n        @updateUnits()\r\n        @updateBullets()\r\n        @team[0].changePoint -100 if @input.keys['o'] # debug\r\n        @team[1].changePoint -100 if @input.keys['p'] # debug\r\n\r\n        result = undefined\r\n        for t, i in @team\r\n          if t.point is 0\r\n            result = if i is playerTeam then false else true\r\n            break\r\n\r\n        if result isnt undefined\r\n          @input.offAll()\r\n          gResult = @setupResultView result\r\n          @container.addChild gResult\r\n          transit 'result'\r\n    \r\n    @scene.result = =>\r\n      (transit)->\r\n\r\n    @phase = null\r\n    @transit = (next)=> @phase = @scene[next]().bind @, @transit\r\n\r\n    @transit 'init'\r\n\r\n  setCoredismap: (team, core)->\r\n    cdm = team.coredismap\r\n    queue = []\r\n    for k in [0...@resolution]\r\n      for i in [0...@resolution]\r\n        queue.push\r\n          x: core.x * @resolution + i\r\n          y: core.y * @resolution + k\r\n          v: 1\r\n\r\n    dir = []\r\n    for k in [-1, 0, 1]\r\n      for i in [-1, 0, 1]\r\n        continue if i is 0 and k is 0\r\n        dir.push [i, k]\r\n\r\n    indexify = (x, y)=>\r\n      rx = x * @resolution\r\n      ry = y * @resolution\r\n      res = []\r\n      for k in [0...@resolution]\r\n        for i in [0...@resolution]\r\n          res.push (rx + i) + (ry + k) * @sizer\r\n      res\r\n    \r\n    for f, i in @field\r\n      continue if [0, 6, 7, 8].some((u)=> f is u)\r\n      x = i % @size\r\n      y = i / @size | 0\r\n      for index in indexify(x, y)\r\n        cdm[index] = -1\r\n\r\n    while queue.length > 0\r\n      {x, y, v} = queue[0]\r\n      queue.splice 0, 1\r\n      for d in dir\r\n        index = (x + d[0]) + (y + d[1]) * @sizer\r\n        continue unless cdm[index] is 0\r\n        cdm[index] = v\r\n        queue.push\r\n          x: x + d[0]\r\n          y: y + d[1]\r\n          v: v + 1\r\n\r\n    for index in indexify(core.x, core.y)\r\n      cdm[index] = 0\r\n\r\n  setCoredirmap: (team, core)->\r\n    cdm = team.coredirmap\r\n    queue = []\r\n    for k in [0...@resolution]\r\n      queue.push\r\n        x: core.x * @resolution + k\r\n        y: core.y * @resolution\r\n        dir: 3\r\n      queue.push\r\n        x: core.x * @resolution + k\r\n        y: core.y * @resolution + @resolution - 1\r\n        dir: 4\r\n      queue.push\r\n        x: core.x * @resolution\r\n        y: core.y * @resolution + k\r\n        dir: 1\r\n      queue.push\r\n        x: core.x * @resolution + @resolution - 1\r\n        y: core.y * @resolution + k\r\n        dir: 2\r\n\r\n    indexify = (x, y)=>\r\n      rx = x * @resolution\r\n      ry = y * @resolution\r\n      res = []\r\n      for k in [0...@resolution]\r\n        for i in [0...@resolution]\r\n          res.push (rx + i) + (ry + k) * @sizer\r\n      res\r\n    \r\n    for f, i in @field\r\n      continue if [0, 6, 7, 8].some((u)=> f is u)\r\n      x = i % @size\r\n      y = i / @size | 0\r\n      for index in indexify(x, y)\r\n        cdm[index] = -1\r\n\r\n    while queue.length > 0\r\n      {x, y, dir} = queue[0]\r\n      queue.splice 0, 1\r\n      d = [0, 0]\r\n      d[0] = if dir < 3 then (dir - 1) * 2 - 1 else 0\r\n      d[1] = if dir > 2 then (dir - 3) * 2 - 1 else 0\r\n      index = (x + d[0]) + (y + d[1]) * @sizer\r\n      unless cdm[index] is -1\r\n        cdm[index] = dir\r\n        queue.push\r\n          x: x + d[0]\r\n          y: y + d[1]\r\n          dir: dir\r\n\r\n    for index in indexify(core.x, core.y)\r\n      cdm[index] = 0\r\n\r\n\r\n  setEnemydismap: (team, units)->\r\n    for t, i in team.enemydismap\r\n      team.enemydismap[i] = 0\r\n\r\n    edm = team.enemydismap\r\n    queue = []\r\n    dir = []\r\n    for k in [-1, 0, 1]\r\n      for i in [-1, 0, 1]\r\n        continue if i is 0 and k is 0\r\n        dir.push [i, k]\r\n    \r\n    indexify = (x, y)=>\r\n      rx = x * @resolution\r\n      ry = y * @resolution\r\n      res = []\r\n      for k in [0...@resolution]\r\n        for i in [0...@resolution]\r\n          res.push (rx + i) + (ry + k) * @sizer\r\n      res\r\n    \r\n    for u in units\r\n      x = Math.ceil(u.i.pos.x * @resolution)\r\n      y = Math.ceil(u.i.pos.y * @resolution) \r\n      \r\n      queue.push\r\n        x: x\r\n        y: y\r\n        v: 1\r\n\r\n    x = Math.ceil(team.core.x * @resolution) + util.rand(8) - 4\r\n    y = Math.ceil(team.core.y * @resolution) + util.rand(8) - 4\r\n    queue.push\r\n      x: x\r\n      y: y\r\n      v: 1\r\n    \r\n    for f, i in @field\r\n      continue if [0, 6, 7, 8].some((u)=> f is u)\r\n      x = i % @size\r\n      y = i / @size | 0\r\n      for index in indexify(x, y)\r\n        edm[index] = -1\r\n\r\n    while queue.length > 0\r\n      {x, y, v} = queue[0]\r\n      queue.splice 0, 1\r\n      for d in dir\r\n        index = (x + d[0]) + (y + d[1]) * @sizer\r\n        continue unless edm[index] is 0\r\n        edm[index] = v\r\n        continue if v > 20\r\n        queue.push\r\n          x: x + d[0]\r\n          y: y + d[1]\r\n          v: v + 1\r\n\r\n  addUnit: (u)->\r\n    t = u.team\r\n    {x, y} = @team[t].base\r\n    u.pos.x = x + util.randf 1\r\n    u.pos.y = y + util.randf 1\r\n    u.ang = if t % 2 then 180 else 0\r\n    g = @setupUnit u\r\n    @container.addChild g\r\n    @team[t].units.push\r\n      i: u\r\n      g: g\r\n\r\n  addBullet: (u)->\r\n    t = u.team\r\n    b = new Bullet {x: u.pos.x, y: u.pos.y}, 0.2, u.ang, 0.1, u\r\n    g = @setupBullet b\r\n    @container.addChild g\r\n    @team[t].bullets.push\r\n      i: b\r\n      g: g\r\n\r\n  hitCheck: (x, y)->\r\n    return -2 if x < 0.5 or y < 0.5\r\n    return -2 if x > @size - 0.5 or y > @size - 0.5\r\n    i = Math.floor(x - 0.5) + @size * Math.floor(y - 0.5)\r\n    rx = x - 0.5 - Math.floor(x - 0.5)\r\n    ry = y - 0.5 - Math.floor(y - 0.5)\r\n    rx = 0 if rx < 0.0001\r\n    ry = 0 if ry < 0.0001\r\n    d = [@dismap[i], @dismap[i + 1], @dismap[i + @size], @dismap[i + @size + 1]]\r\n    f = [@field[i], @field[i + 1], @field[i + @size], @field[i + @size + 1]]\r\n    \r\n    res =  (1 - rx) * (1 - ry) * d[0] + (1 - rx) * ry * d[2] + rx * (1 - ry) * d[1] + rx * ry * d[3]\r\n    _.remove f, (v)-> v is 0\r\n    \r\n    return {d: res, f: _.uniq f} \r\n\r\n  fix: (unit)->\r\n    poss = unit.getCollider()\r\n    for p in poss\r\n      {d, f} = @hitCheck p.x, p.y\r\n      if d < 0\r\n        rad = (unit.ang + 180) * Math.PI / 180\r\n        unit.pos.x -= d * Math.cos rad\r\n        unit.pos.y -= d * Math.sin rad\r\n        unit.vel = 0.0\r\n\r\n  setupText: (x, y, str, font, color, stylex, styley)->\r\n    text = new PIXI.Text str,\r\n      font: font\r\n      fill: color\r\n      align: stylex\r\n    switch stylex\r\n      when 'left'\r\n        text.position.x = x\r\n      when 'center'\r\n        text.position.x = x - text.width / 2\r\n      when 'right'\r\n        text.position.x = x - text.width\r\n    switch styley\r\n      when 'top'\r\n        text.position.y = y\r\n      when 'center'\r\n        text.position.y = y - text.height / 2\r\n      when 'bottom'\r\n        text.position.y = y - text.height\r\n    return text\r\n\r\n  setupPlayerMarker: (unit)->\r\n    g = new PIXI.Graphics\r\n    size = unit.size * @gridSize * 5\r\n\r\n    g.lineStyle 2, 0xffff00\r\n      .drawRect -size, -size, size * 2, size * 2\r\n\r\n    g.alpha = 0.3\r\n\r\n    return g\r\n\r\n  setupStartView: ->\r\n    g = new PIXI.Graphics\r\n    g.lineStyle 0\r\n      .beginFill 0x333333\r\n      .drawRect 0, 0, @viewsize, @viewsize\r\n      .endFill()\r\n    g.alpha = 0.7\r\n\r\n    text = @setupText @viewsize / 2, @viewsize / 2, 'PRESS Z', '24px Papyrus', 0xffffff, 'center', 'center'\r\n    g.addChild text\r\n\r\n    col = (util.rand(256) << 16) + (util.rand(256) << 8) + (util.rand(256))\r\n    text2 = @setupText @viewsize / 2, @viewsize / 4, 'harmony', '56px Papyrus', col, 'center', 'center'\r\n    filter = new PIXI.filters.BlurFilter\r\n    filter.blur = 32\r\n    text2.filters = [filter]\r\n    g.addChild text2\r\n\r\n    text3 = @setupText @viewsize / 2, @viewsize / 4, 'harmony', '56px Papyrus', 0xffffff, 'center', 'center'\r\n    g.addChild text3\r\n\r\n    text4 = @setupText @viewsize, @viewsize, \"version: #{meta.version}\", '16px Papyrus', 0xffffff, 'right', 'bottom'\r\n    g.addChild text4\r\n\r\n    return g\r\n\r\n  setupPauseView: ->\r\n    g = new PIXI.Graphics\r\n    g.lineStyle 0\r\n      .beginFill 0x333333\r\n      .drawRect 0, 0, @viewsize, @viewsize\r\n      .endFill()\r\n    g.alpha = 0.7\r\n\r\n    text = @setupText @viewsize / 2, @viewsize / 2, 'Pause', '24px Papyrus', 0xffffff, 'center', 'center'\r\n    g.addChild text\r\n\r\n    return g\r\n\r\n  setupResultView: (isWin)->\r\n    filter = new PIXI.filters.BlurFilter\r\n    filter.blur = 24\r\n\r\n    g = new PIXI.Graphics\r\n    g.lineStyle 0\r\n      .beginFill 0x333333\r\n      .drawRect 0, 0, @viewsize, @viewsize\r\n      .endFill()\r\n    g.alpha = 0.7\r\n    col = if isWin then 0xffff00 else 0x00ffff\r\n    str = if isWin then 'You Win' else 'You Lose'\r\n    text = @setupText @viewsize / 2, @viewsize / 2, str, '36px Papyrus', col, 'center', 'center'\r\n    g.addChild text\r\n\r\n    text3 = @setupText @viewsize / 2, @viewsize / 2, str, '36px Papyrus', col, 'center', 'center'\r\n    text3.filters = [filter]\r\n    g.addChild text3\r\n\r\n    text2 = @setupText @viewsize / 2, @viewsize * 3 / 4, 'PRESS ESC or Reload', '16px Papyrus', 0xffffff, 'center', 'bottom'\r\n    g.addChild text2\r\n    \r\n    return g\r\n\r\n  setupField: ->\r\n    g = new PIXI.Graphics\r\n    g2 = new PIXI.Graphics\r\n    filter = new PIXI.filters.BlurFilter\r\n    filter.blur = 7\r\n\r\n    draw = (type, width, color)=>\r\n      \r\n      for v, i in @dismap\r\n        x = i % @size\r\n        y = i / @size | 0\r\n        continue if x > @size - 2\r\n        break if y > @size - 2 \r\n        d = [@dismap[i], @dismap[i + 1], @dismap[i + @size], @dismap[i + @size + 1]]\r\n        f = [@field[i], @field[i + 1], @field[i + @size], @field[i + @size + 1]]\r\n      \r\n        continue unless f.some((v)-> v is type)\r\n      \r\n        p = []\r\n        p.push {x: x + 0.5, y: y} if d[0] * d[1] < 0\r\n        p.push {x: x, y: y + 0.5} if d[0] * d[2] < 0\r\n        p.push {x: x + 1.0, y: y + 0.5} if d[1] * d[3] < 0\r\n        p.push {x: x + 0.5, y: y + 1.0} if d[2] * d[3] < 0\r\n        continue unless p.length is 2\r\n        \r\n        g.lineStyle width, color\r\n          .moveTo (p[0].x + 0.5) * @gridSize, (p[0].y + 0.5) * @gridSize\r\n          .lineTo (p[1].x + 0.5) * @gridSize, (p[1].y + 0.5) * @gridSize\r\n\r\n        g2.lineStyle width * 2, color\r\n          .moveTo (p[0].x + 0.5) * @gridSize, (p[0].y + 0.5) * @gridSize\r\n          .lineTo (p[1].x + 0.5) * @gridSize, (p[1].y + 0.5) * @gridSize\r\n\r\n    draw 1, 2, 0x00ff7f\r\n    draw 2, 2, 0xff7f00\r\n    draw 3, 2, 0xff3000\r\n    draw 4, 2, 0x00a0ff\r\n    draw 5, 2, 0x0050ff\r\n\r\n    filter2 = new PIXI.filters.BlurFilter\r\n    filter2.blur = 32\r\n\r\n    for t in @team\r\n      str = \"#{t.point}\"\r\n      col = 0xffffff\r\n      x = (t.base.x + 0.5) * @gridSize\r\n      y = (t.base.y + 0.5) * @gridSize\r\n      t.scoreborad = @setupText x, y, str, '36px Papyrus', col, 'center', 'center'\r\n      t.scoreborad2 = @setupText x, y, str, '36px Papyrus', t.color, 'center', 'center'\r\n      t.scoreborad2.filters = [filter2]\r\n      t.scoreborad.alpha = 0.7\r\n      \r\n      t.scoreboradUpdate = do =>\r\n        gs = @gridSize\r\n        ->\r\n          x = (@base.x + 0.5) * gs\r\n          y = (@base.y + 0.5) * gs\r\n          @scoreborad.text = \"#{@point}\" \r\n          @scoreborad2.text = @scoreborad.text\r\n          @scoreborad.position.x = x - @scoreborad.width / 2\r\n          @scoreborad.position.y = y - @scoreborad.height / 2\r\n          @scoreborad2.position  = @scoreborad.position\r\n      \r\n      g.addChild t.scoreborad2\r\n      g.addChild t.scoreborad\r\n\r\n    g.blendMode = PIXI.BLEND_MODES.ADD\r\n    g.alpha = 0.7\r\n    #g2.alpha = 0.5\r\n    g2.filters = [filter]\r\n\r\n    g.addChild g2\r\n\r\n    ###\r\n    for t, ti in @team\r\n      continue unless ti is 1\r\n      for d, i in t.enemydismap #t.coredirmap\r\n        continue unless d > 0\r\n        x = i % @sizer\r\n        y = (i / @sizer) | 0\r\n        tx = (x + 0.5) * @gridSizer\r\n        ty = (y + 0.5) * @gridSizer\r\n        text = @setupText tx, ty, \"#{d}\", '8px', 0xffffff, 'center', 'center'\r\n        g.addChild text\r\n    ###\r\n\r\n    return g\r\n\r\n  setupBullet: (b)->\r\n    g = new PIXI.Graphics\r\n    \r\n    p0x = b.pos.x * @gridSize\r\n    p0y = b.pos.y * @gridSize\r\n    size = b.size * @gridSize\r\n\r\n    g.lineStyle 1, @team[b.team].color\r\n      .drawCircle 0, 0, size\r\n\r\n    g.position.x = p0x\r\n    g.position.y = p0y \r\n\r\n    return g\r\n\r\n  setupUnit: (unit)->\r\n    g = new PIXI.Graphics\r\n    \r\n    p0x = unit.pos.x * @gridSize\r\n    p0y = unit.pos.y * @gridSize\r\n    size = unit.size * @gridSize\r\n\r\n    p1x = size\r\n    p1y = 0\r\n\r\n    rad = -150 * Math.PI / 180\r\n    p2x = size * Math.cos rad\r\n    p2y = size * Math.sin rad\r\n\r\n    rad = 150 * Math.PI / 180\r\n    p3x = size * Math.cos rad\r\n    p3y = size * Math.sin rad\r\n    \r\n    g.lineStyle 2, @team[unit.team].color\r\n      .moveTo p1x, p1y\r\n      .lineTo p2x, p2y\r\n      .lineTo 0, 0\r\n      .lineTo p3x, p3y\r\n      .lineTo p1x, p1y\r\n\r\n    unit.scoreborad = @setupText p0x + size * 1.4, p0y - size * 1.4, \"#{unit.hp}\", '14px Papyrus', 0xffffff, 'center', 'center'\r\n    unit.scoreboradUpdate = do =>\r\n      gs = @gridSize\r\n      ->\r\n        p0x = @pos.x * gs\r\n        p0y = @pos.y * gs\r\n        size = @size * gs\r\n        @scoreborad.text = \"#{@hp}\"\r\n        @scoreborad.position.x = p0x + size * 1.4\r\n        @scoreborad.position.y = p0y - size * 1.4\r\n\r\n    @container.addChild unit.scoreborad\r\n    g.position.x = p0x\r\n    g.position.y = p0y \r\n    g.rotation = unit.shotang * Math.PI / 180\r\n\r\n    return g\r\n\r\n  getNear: (pos, team, limit)->\r\n    ang = undefined\r\n    for u in team.units\r\n      {x, y} = u.i.pos\r\n      r2 = Math.pow(pos.x - x, 2) + Math.pow(pos.y - y, 2) \r\n      if r2 < limit * limit\r\n        rad = Math.atan2 y - pos.y, x - pos.x\r\n        ang = rad * 180 / Math.PI\r\n    ang\r\n\r\n  updateUnits: ->\r\n    for t, ti in @team\r\n      unless util.rand 8\r\n        @setEnemydismap t, @team[1 - ti].units\r\n      for u in t.units\r\n        u.i.update (v)=>\r\n          @addBullet v\r\n        , (pos, limit)=>\r\n          @getNear pos, @team[1 - ti], limit\r\n\r\n        @fix u.i\r\n\r\n        for t in @team\r\n          continue if u.i.team is t.id \r\n          p1 = u.i.pos\r\n          r1 = u.i.size * 3 / 4\r\n          for b in t.bullets\r\n            p2 = b.i.pos\r\n            r2 = b.i.size\r\n            if Math.pow(p1.x - p2.x, 2) + Math.pow(p1.y - p2.y, 2) < Math.pow(r1 + r2, 2)\r\n              b.i.removeflag = true\r\n              u.i.hp--\r\n              u.i.scoreboradUpdate()\r\n\r\n        u.g.position.x = u.i.pos.x * @gridSize\r\n        u.g.position.y = u.i.pos.y * @gridSize\r\n        u.g.rotation = u.i.shotang * Math.PI / 180\r\n\r\n        if u.i.brain.input?\r\n          @marker.position.x = u.i.pos.x * @gridSize\r\n          @marker.position.y = u.i.pos.y * @gridSize\r\n          @marker.rotation = u.shotang * Math.PI / 180\r\n\r\n  updateBullets: ->\r\n    for t in @team\r\n      removeList = []\r\n      for b, i in t.bullets\r\n        b.i.update()\r\n        poss = b.i.getCollider()\r\n        for p in poss\r\n          {d, f} = @hitCheck p.x, p.y\r\n          if d < 0\r\n            b.i.removeflag = true\r\n            for type in f\r\n              switch type\r\n                when 2\r\n                  break if b.i.team is 0\r\n                  @team[0].changePoint -1\r\n                when 4\r\n                  break if b.i.team is 1\r\n                  @team[1].changePoint -1\r\n\r\n        b.g.position.x = b.i.pos.x * @gridSize\r\n        b.g.position.y = b.i.pos.y * @gridSize\r\n        b.g.rotation = b.i.rad\r\n\r\n        if b.i.removeflag\r\n          removeList.push i\r\n          @container.removeChild b.g \r\n\r\n      _.remove t.bullets, (v, k)-> removeList.some((u)-> u is k)\r\n\r\n\r\n  update: ->\r\n    location.reload() if @input.keys['esc']\r\n    @phase()\r\n\r\nmodule.exports = World\r\n","module.exports = \r\n  IDOL: 0\r\n  MOVE:\r\n    TOP:    1\r\n    BOTTOM: 2\r\n    LEFT:   3\r\n    RIGHT:  4\r\n  ATTACK:\r\n    AIM:    5\r\n    FOWARD: 6","class Brain\r\n  constructor: ()->\r\n\r\n\r\n  update: (unit)->\r\n\r\n\r\nmodule.exports = Brain\r\n","util = require '../util'\r\nBrain = require '../brain'\r\nACTION = require '../actions'\r\n\r\nclass AttackerBrain extends Brain\r\n  constructor: (@team)->\r\n    super()\r\n    @prevacts = []\r\n\r\n  update: (unit, near)->\r\n    super unit\r\n\r\n    if util.rand 8\r\n      return @prevacts\r\n\r\n    acts = [] \r\n\r\n    dir = []\r\n    for k in [-1, 0, 1]\r\n      for i in [-1, 0, 1]\r\n        continue if i is 0 and k is 0\r\n        dir.push [i, k]\r\n\r\n    {x, y} = unit.pos\r\n    mx = Math.ceil((x - 0.5) * @team.mapresolution)\r\n    my = Math.ceil((y - 0.5) * @team.mapresolution)\r\n    cd = @team.coredismap[mx + my * @team.mapsize * @team.mapresolution]\r\n    cdr = @team.coredirmap[mx + my * @team.mapsize * @team.mapresolution]\r\n    \r\n    if cdr > 0\r\n      angs = [0, 180, 90, 270]\r\n      ang = (unit.ang + 360) % 360\r\n      if ang is angs[cdr - 1]\r\n        if util.rand(5) is 0  and near unit.pos, 5\r\n          acts.push ACTION.ATTACK.AIM\r\n        else \r\n          acts.push ACTION.ATTACK.FOWARD\r\n      else\r\n        switch cdr\r\n          when 1 then acts.push ACTION.MOVE.RIGHT\r\n          when 2 then acts.push ACTION.MOVE.LEFT\r\n          when 3 then acts.push ACTION.MOVE.BOTTOM\r\n          when 4 then acts.push ACTION.MOVE.TOP\r\n      \r\n    else if util.rand 8\r\n      mind = cd\r\n      cand = []\r\n      for d in dir\r\n        index = (mx + d[0]) + (my + d[1]) * @team.mapsize * @team.mapresolution\r\n        index2 = (mx + d[0] * 2) + (my + d[1] * 2) * @team.mapsize * @team.mapresolution\r\n        dis = @team.coredismap[index]\r\n        dis2 = @team.coredismap[index2]\r\n        continue if dis < 0\r\n        continue if util.rand(2) and dis2 < 0\r\n        if dis is mind\r\n          cand.push d\r\n        else if dis < mind and dis > 2\r\n          cand = [d]\r\n          mind = dis\r\n  \r\n      if 0 < cand.length < 5\r\n        d = util.randArray cand\r\n        switch d[0]\r\n          when -1 then acts.push ACTION.MOVE.LEFT\r\n          when 1 then acts.push ACTION.MOVE.RIGHT\r\n        switch d[1]\r\n          when -1 then acts.push ACTION.MOVE.TOP\r\n          when 1 then acts.push ACTION.MOVE.BOTTOM\r\n        if near unit.pos, 5\r\n          acts.push ACTION.ATTACK.AIM\r\n      else\r\n        acts.push util.randArray([\r\n          ACTION.MOVE.TOP, \r\n          ACTION.MOVE.BOTTOM, \r\n          ACTION.MOVE.LEFT, \r\n          ACTION.MOVE.RIGHT\r\n        ])\r\n        acts.push ACTION.ATTACK.AIM\r\n    else\r\n      acts.push util.randArray([\r\n        ACTION.MOVE.TOP, \r\n        ACTION.MOVE.BOTTOM, \r\n        ACTION.MOVE.LEFT, \r\n        ACTION.MOVE.RIGHT\r\n      ])\r\n      acts.push ACTION.ATTACK.AIM\r\n\r\n    @prevacts = acts\r\n\r\n    return acts\r\n\r\nmodule.exports = AttackerBrain","util = require '../util'\r\nBrain = require '../brain'\r\nACTION = require '../actions'\r\n\r\nclass DefenderBrain extends Brain\r\n  constructor: (@team)->\r\n    super()\r\n    @prevacts = []\r\n\r\n  update: (unit, near)->\r\n    super unit\r\n\r\n    if util.rand 8\r\n      return @prevacts\r\n\r\n    acts = [] \r\n\r\n    dir = []\r\n    for k in [-1, 0, 1]\r\n      for i in [-1, 0, 1]\r\n        continue if i is 0 and k is 0\r\n        dir.push [i, k]\r\n\r\n    {x, y} = unit.pos\r\n    mx = Math.ceil((x - 0.5) * @team.mapresolution)\r\n    my = Math.ceil((y - 0.5) * @team.mapresolution)\r\n    ed = @team.enemydismap[mx + my * @team.mapsize * @team.mapresolution]\r\n    cdr = @team.coredirmap[mx + my * @team.mapsize * @team.mapresolution]\r\n    \r\n    if cdr > 0 #and util.rand 32\r\n      angs = [0, 180, 90, 270]\r\n      ang = (unit.ang + 360) % 360\r\n      if ang is angs[cdr - 1]\r\n        if util.rand(5) and near unit.pos\r\n          acts.push ACTION.ATTACK.AIM\r\n        else \r\n          acts.push ACTION.ATTACK.FOWARD\r\n      else\r\n        switch cdr\r\n          when 1 then acts.push ACTION.MOVE.RIGHT\r\n          when 2 then acts.push ACTION.MOVE.LEFT\r\n          when 3 then acts.push ACTION.MOVE.BOTTOM\r\n          when 4 then acts.push ACTION.MOVE.TOP\r\n      \r\n    else if util.rand(8) and 0 < ed\r\n      mind = ed\r\n      cand = []\r\n      for d in dir\r\n        index = (mx + d[0]) + (my + d[1]) * @team.mapsize * @team.mapresolution\r\n        index2 = (mx + d[0] * 2) + (my + d[1] * 2) * @team.mapsize * @team.mapresolution\r\n        dis = @team.enemydismap[index]\r\n        dis2 = @team.enemydismap[index2]\r\n        continue if dis < 0\r\n        continue if util.rand(2) and dis2 < 0\r\n        if dis is mind\r\n          cand.push d\r\n        else if dis < mind and dis > 2\r\n          cand = [d]\r\n          mind = dis\r\n  \r\n      if 0 < cand.length < 5\r\n        if ed < 6\r\n          acts.push ACTION.ATTACK.AIM\r\n        else \r\n          acts.push ACTION.ATTACK.FOWARD\r\n        d = util.randArray cand\r\n        switch d[0]\r\n          when -1 then acts.push ACTION.MOVE.LEFT\r\n          when 1 then acts.push ACTION.MOVE.RIGHT\r\n        switch d[1]\r\n          when -1 then acts.push ACTION.MOVE.TOP\r\n          when 1 then acts.push ACTION.MOVE.BOTTOM\r\n      else\r\n        acts.push util.randArray([\r\n          ACTION.MOVE.TOP, \r\n          ACTION.MOVE.BOTTOM, \r\n          ACTION.MOVE.LEFT, \r\n          ACTION.MOVE.RIGHT\r\n        ])\r\n        acts.push ACTION.ATTACK.AIM\r\n\r\n    else\r\n      acts.push util.randArray([\r\n        ACTION.MOVE.TOP, \r\n        ACTION.MOVE.BOTTOM, \r\n        ACTION.MOVE.LEFT, \r\n        ACTION.MOVE.RIGHT\r\n      ])\r\n      acts.push ACTION.ATTACK.AIM\r\n\r\n    @prevacts = acts\r\n\r\n    return acts\r\n\r\nmodule.exports = DefenderBrain","Brain = require '../brain'\r\nACTION = require '../actions'\r\n\r\nclass HumanBrain extends Brain\r\n  constructor: (@input)->\r\n    super()\r\n\r\n\r\n  update: (unit)->\r\n    super unit\r\n    acts = []  \r\n\r\n    if @input.keys['up']\r\n      acts.push ACTION.MOVE.TOP\r\n    if @input.keys['down']\r\n      acts.push ACTION.MOVE.BOTTOM\r\n    if @input.keys['right']\r\n      acts.push ACTION.MOVE.RIGHT\r\n    if @input.keys['left']\r\n      acts.push ACTION.MOVE.LEFT\r\n    if @input.keys['z'] and @input.keys['shift']\r\n      acts.push ACTION.ATTACK.AIM\r\n    else if @input.keys['z']\r\n      acts.push ACTION.ATTACK.FOWARD\r\n    \r\n    \r\n    acts\r\n\r\nmodule.exports = HumanBrain","class Bullet\r\n  constructor: (@pos, @size, ang, @vel, @parent)->\r\n    @rad = ang * Math.PI / 180\r\n    @team = @parent.team\r\n    @r = 0\r\n    \r\n  getCollider: ->\r\n    rad45 = Math.PI * 45 / 180\r\n    colls = []\r\n    colls.push\r\n      x: @pos.x # + @size * Math.cos @rad\r\n      y: @pos.y # + @size * Math.sin @rad\r\n    colls.push\r\n      x: @pos.x + @size * Math.cos (@rad + rad45)\r\n      y: @pos.y + @size * Math.sin (@rad + rad45)\r\n    colls.push\r\n      x: @pos.x + @size * Math.cos (@rad - rad45)\r\n      y: @pos.y + @size * Math.sin (@rad - rad45)\r\n    colls\r\n\r\n  update: ->\r\n    @pos.x += @vel * Math.cos @rad\r\n    @pos.y += @vel * Math.sin @rad\r\n    @r += @vel\r\n\r\nmodule.exports = Bullet\r\n","class Input\r\n  constructor: (@domElement = document)->\r\n    @keys = {}\r\n    @listener = {}\r\n\r\n    @keyMap =\r\n      8: 'backspace'\r\n      13: 'enter'\r\n      16: 'shift'\r\n      17: 'ctrl'\r\n      18: 'alt'\r\n      27: 'esc'\r\n      32: 'space'\r\n      37: 'left'\r\n      38: 'up'\r\n      39: 'right'\r\n      40: 'down'\r\n\r\n    mapper = (keycode, status)=>\r\n      key: @keyMap[keycode] or String.fromCharCode(keycode).toLowerCase()\r\n      status: status\r\n\r\n    keydown = Bacon.fromEventTarget(@domElement, 'keydown').map (e)=> mapper.call @, e.keyCode, true\r\n    keyup = Bacon.fromEventTarget(@domElement, 'keyup').map (e)=> mapper.call @, e.keyCode, false\r\n    keydown.merge(keyup).filter (e)->\r\n      code = e.key.charCodeAt 0\r\n      47 < code < 58 or 96 < code < 123\r\n    .onValue (e)=>\r\n      @keys[e.key] = e.status\r\n      return unless e.status \r\n      @listener[e.key]?.forEach (v)-> do v\r\n\r\n    buttons = [1, 2]\r\n    \r\n    mouseEvent = (type)=>\r\n      listener = {}\r\n      buttons.forEach (e)-> listener[e] = []\r\n      Bacon.fromEventTarget @domElement, type\r\n        .filter (e)-> e.button in buttons\r\n        .onValue (e)-> listener[e.button].forEach (v)-> v e.clientX, e.clientY\r\n      [ \r\n        (btn, cb)-> listener[btn]?.push cb,\r\n        (btn, cb)-> _.remove listener[btn], (v)-> if cb? then v is cb else true\r\n      ]\r\n\r\n    [@onMouseDown, @offMouseDown] = mouseEvent 'mousedown'\r\n    [@onMouseUp, @offMouseUp] = mouseEvent 'mouseup'\r\n    [@onDoubleClick, @offDoubleClick] = _.transform mouseEvent('dblclick'), (res, e)-> res.push e.bind @, 1\r\n\r\n    [@onMouseMove, @offMouseMove] = do =>\r\n      listener = {}\r\n      active = {}\r\n      buttons.forEach (e)-> \r\n        active[e] = false\r\n        listener[e] = []\r\n      md = Bacon.fromEventTarget(@domElement, 'mousedown').map (e)-> [e.button, true]\r\n      mu = Bacon.fromEventTarget(@domElement, 'mouseup').map (e)-> [e.button, false]\r\n      md.merge(mu).onValue (e)-> active[e[0]] = e[1] if active[e[0]]?\r\n      Bacon.fromEventTarget(@domElement, 'mousemove').onValue (e)->\r\n        for own k, v of listener\r\n          v.forEach (u)-> u e.clientX, e.clientY if active[k] \r\n      [\r\n        (btn, cb)-> listener[btn]?.push cb,\r\n        (btn, cb)-> _.remove listener[btn], (v)-> if cb? then v is cb else true\r\n      ]\r\n\r\n    @offAll = =>\r\n      buttons.forEach (v)=>\r\n        @offMouseDown v\r\n        @offMouseUp v\r\n        @offMouseMove v\r\n      @offDoubleClick()\r\n      @listener = {}\r\n        \r\n\r\n  on: (key, cb)->\r\n    return @listener[key].push cb if @listener[key]\r\n    @listener[key] = [cb]\r\n\r\n  off: (key, cb)->\r\n    _.remove @listener[key], (v)-> v is cb\r\n\r\n\r\nmodule.exports = Input","'use strict'\r\n\r\nView = require './view'\r\nWorld = require './World'\r\n\r\nclass Main \r\n  constructor: ->\r\n    @view = new View\r\n    @world = new World @view.container, @view.size\r\n    \r\n  loop: ->\r\n    requestAnimationFrame => @loop()\r\n    @view.render => @world.update()\r\n\r\n$ -> do new Main().loop\r\n","module.exports = \r\n  INIT: 0\r\n  READY: 1\r\n  ACTIVE: 2\r\n  DEAD: 3","\r\nclass Team\r\n  constructor: (@id, @base, @core, @color, @point = 100)->\r\n    @units = []\r\n    @bullets = []\r\n\r\n  changePoint: (diff)->\r\n    @point += diff\r\n    @point = Math.max 0, @point\r\n    @scoreboradUpdate()\r\n\r\n  eachMembers: (f)->\r\n    f u for u in @units\r\n\r\nmodule.exports = Team","ACTION = require './actions'\r\nSTATUS = require './status'\r\nutil = require './util'\r\n\r\nclass Unit \r\n  constructor: (@team, @base, @brain)->\r\n    @pos = {x: 0, y: 0}\r\n    @ang = if @team % 2 then 180 else 0\r\n    @shotang = 0.0\r\n    @fullhp = 5\r\n    @hp = @fullhp\r\n    @size = 0.2\r\n    @vel = 0.0\r\n    @shotInterval = 0\r\n    @status = STATUS.ACTIVE\r\n    @respawnCount = 0\r\n\r\n  getCollider: ->\r\n    colls = []\r\n    rad = @ang * Math.PI / 180\r\n    colls.push\r\n      x: @pos.x + @size * Math.cos rad\r\n      y: @pos.y + @size * Math.sin rad\r\n    ###\r\n    rad = (@ang - 150) * Math.PI / 180\r\n    colls.push\r\n      x: @pos.x + @size * Math.cos rad\r\n      y: @pos.y + @size * Math.sin rad\r\n    rad = (@ang + 150) * Math.PI / 180\r\n    colls.push\r\n      x: @pos.x + @size * Math.cos rad\r\n      y: @pos.y + @size * Math.sin rad\r\n    ###\r\n    colls\r\n\r\n  action: (actions, shot, near)->\r\n    moveflag = 0\r\n    aimflag = false\r\n    shotflag = false\r\n    angs = [undefined, -90, 90, undefined, 180, -135, 135, 180, 0, -45, 45, 0, undefined, -90, 90, undefined]\r\n    for act in actions\r\n      switch act\r\n        when ACTION.MOVE.TOP\r\n          moveflag += 1\r\n        when ACTION.MOVE.BOTTOM\r\n          moveflag += 2\r\n        when ACTION.MOVE.LEFT\r\n          moveflag += 4\r\n        when ACTION.MOVE.RIGHT\r\n          moveflag += 8  \r\n        when ACTION.ATTACK.AIM\r\n          aimflag = true\r\n          shotflag = true\r\n        when ACTION.ATTACK.FOWARD\r\n          shotflag = true\r\n    if angs[moveflag]?\r\n      @ang = angs[moveflag]\r\n      @vel = if aimflag then 0.03 else 0.06\r\n    else\r\n      @vel = 0\r\n\r\n    @shotang = @ang \r\n    @shotInterval-- if @shotInterval > 0\r\n\r\n    if shotflag and @shotInterval is 0\r\n      if aimflag\r\n        a = near @pos, 5\r\n        @shotang = a if a\r\n      @shotInterval = 20\r\n      shot @\r\n\r\n  update: (shot, near)->\r\n    switch @status\r\n      when STATUS.READY\r\n        if @respawnCount is 0\r\n          @status = STATUS.ACTIVE\r\n          @pos.x = @base.x + util.randf 1\r\n          @pos.y = @base.y + util.randf 1\r\n          @hp = @fullhp\r\n          @ang = if @team % 2 then 180 else 0\r\n        else\r\n          @respawnCount--\r\n      when STATUS.ACTIVE\r\n        @action @brain.update(@, near), shot, near\r\n\r\n        rad = @ang * Math.PI / 180\r\n        @pos.x += @vel * Math.cos rad\r\n        @pos.y += @vel * Math.sin rad\r\n        @vel = @vel * 0.7\r\n        @vel = 0.0 if @vel * @vel < 0.0001\r\n\r\n       \r\n\r\n        if @hp <= 0\r\n          @status = STATUS.DEAD\r\n\r\n      when STATUS.DEAD\r\n        @pos.x = -100\r\n        @pos.y = -100\r\n        @status = STATUS.READY\r\n        @respawnCount = 180\r\n\r\n     @scoreboradUpdate()\r\n\r\n\r\nmodule.exports = Unit\r\n","class Utility\r\n  @rand = (n)->\r\n    Math.floor Math.random() * n\r\n\r\n  @randf = (n)->\r\n    Math.random() * n\r\n\r\n  @randRange = (min, max)->\r\n    Math.floor(Math.random() * (max - min + 1)) + min\r\n  \r\n  @randArray = (arr)->\r\n    arr[Math.floor Math.random() * arr.length]\r\n\r\n\r\nmodule.exports = Utility","class View\r\n  constructor: ->\r\n\r\n    @size = 640\r\n    \r\n    @renderer = PIXI.autoDetectRenderer @size, @size,\r\n        backgroundColor: 0x000000\r\n        antialias: true\r\n        #transparent: true\r\n    $(document.body).append @renderer.view\r\n\r\n    @container = new PIXI.Container\r\n\r\n    @stats = new Stats\r\n    @stats.setMode 0  # 0: fps, 1: ms, 2: mb\r\n    @stats.domElement.style.position = 'absolute'\r\n    @stats.domElement.style.right = '0px'\r\n    @stats.domElement.style.top = '0px'\r\n    $(document.body).append @stats.domElement\r\n\r\n  render: (updater)->\r\n    @stats.begin()\r\n    updater()\r\n    @renderer.render @container\r\n    @stats.end()\r\n\r\n\r\nmodule.exports = View\r\n"],"sourceRoot":"./src"}