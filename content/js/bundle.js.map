{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","content/data/meta.json","bundle.js","node_modules/browserify/node_modules/path-browserify/index.js","node_modules/browserify/node_modules/process/browser.js","src/World.coffee","src/actions.coffee","src/brain.coffee","src/brain/human.coffee","src/brain/standard.coffee","src/bullet.coffee","src/input.coffee","src/main.coffee","src/status.coffee","src/team.coffee","src/unit.coffee","src/util.coffee","src/view.coffee"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","version",2,"process","normalizeArray","parts","allowAboveRoot","up","last","splice","unshift","filter","xs","res","push","splitPathRe","splitPath","filename","exec","slice","resolve","resolvedPath","resolvedAbsolute","arguments","path","cwd","TypeError","charAt","split","p","join","normalize","isAbsolute","trailingSlash","substr","paths","Array","prototype","index","relative","from","to","trim","arr","start","end","fromParts","toParts","Math","min","samePartsLength","outputParts","concat","sep","delimiter","dirname","result","root","dir","basename","ext","extname","str","len","this","_process",3,"cleanUpNextTick","draining","currentQueue","queue","queueIndex","drainQueue","timeout","setTimeout","run","clearTimeout","Item","fun","array","noop","nextTick","args","apply","title","browser","env","argv","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","binding","name","chdir","umask",4,"Bullet","HumanBrain","Input","StandardBrain","Team","Unit","World","meta","util","container","viewsize","size1","b","base","core","gPause","gStart","humanBrain","j","k","len1","len2","m","mapstr","memberNum","playerTeam","ref","ref1","ref2","ref3","v","x","y","size","input","size2","gridSize","resolution","resolution2","sizer","sizer2","gridSizer","field","Uint8Array","dismap","Int32Array","team","replace","parseInt","mapsize","mapresolution","coredismap","setCoredismap","addUnit","some","_this","gField","setupField","addChild","player","setupStartView","setupPauseView","scene","init","transit","keys","removeChild","main","pause","gResult","len3","ref4","updateUnits","updateBullets","changePoint","point","offAll","setupResultView","phase","next","bind","cdm","d","indexify","len4","len5","len6","len7","q","ref5","ref6","ref7","results","rx","ry","g","pos","randf","ang","setupUnit","units","addBullet","shotang","setupBullet","bullets","hitCheck","floor","_","remove","uniq","fix","unit","poss","rad","getCollider","PI","cos","sin","vel","setupText","font","color","stylex","styley","text","PIXI","Text","fill","align","position","width","height","col","text2","text3","text4","Graphics","lineStyle","beginFill","drawRect","endFill","alpha","rand","filters","BlurFilter","blur","isWin","draw","filter2","g2","ti","tx","ty","type","moveTo","lineTo","scoreborad","scoreborad2","scoreboradUpdate","gs","blendMode","BLEND_MODES","ADD","p0x","p0y","drawCircle","p1x","p1y","p2x","p2y","p3x","p3y","hp","rotation","p1","p2","r1","r2","results1","update","id","pow","removeflag","removeList","location","reload","../content/data/meta","./brain/human","./brain/standard","./bullet","./input","./team","./unit","./util",5,"IDOL","MOVE","TOP","BOTTOM","LEFT","RIGHT","ATTACK","AIM","FOWARD",6,"Brain",7,"ACTION","extend","child","parent","ctor","constructor","key","hasProp","__super__","hasOwnProperty","superClass","acts","../actions","../brain",8,"prevacts","cand","cd","dis","mind","mx","my","ceil","randArray","../util",9,"colls",10,"indexOf","item","domElement","buttons","keydown","keyup","mapper","mouseEvent","document","listener","keyMap",13,16,17,18,27,32,37,38,39,40,"keycode","status","String","fromCharCode","toLowerCase","Bacon","fromEventTarget","map","keyCode","merge","charCodeAt","onValue","forEach","button","clientX","clientY","btn","cb","onMouseDown","offMouseDown","onMouseUp","offMouseUp","transform","onDoubleClick","offDoubleClick","active","md","mu","onMouseMove","offMouseMove",11,"Main","View","view","world","loop","requestAnimationFrame","render","$","./World","./view",12,"INIT","READY","ACTIVE","DEAD","diff","max","eachMembers",14,"STATUS","brain","shotInterval","respawnCount","action","actions","shot","act","aimflag","angs","moveflag","shotflag","./actions","./status",15,"Utility","random","randRange","renderer","autoDetectRenderer","backgroundColor","antialias","body","append","Container","stats","Stats","setMode","style","right","top","updater","begin"],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","module.exports={\r\n  \"version\": \"0.0.1\"\r\n}",null,"// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// Split a filename into [root, dir, basename, ext], unix version\n// 'root' is just a slash, or nothing.\nvar splitPathRe =\n    /^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/;\nvar splitPath = function(filename) {\n  return splitPathRe.exec(filename).slice(1);\n};\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function(path) {\n  var result = splitPath(path),\n      root = result[0],\n      dir = result[1];\n\n  if (!root && !dir) {\n    // No dirname whatsoever\n    return '.';\n  }\n\n  if (dir) {\n    // It has a dirname, strip trailing slash\n    dir = dir.substr(0, dir.length - 1);\n  }\n\n  return root + dir;\n};\n\n\nexports.basename = function(path, ext) {\n  var f = splitPath(path)[2];\n  // TODO: make this comparison case-insensitive on windows?\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\n\nexports.extname = function(path) {\n  return splitPath(path)[3];\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n","// shim for using process in browser\n\nvar process = module.exports = {};\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = setTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    clearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        setTimeout(drainQueue, 0);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","path = require 'path'\r\nfs = require 'fs'\r\n\r\nutil = require './util'\r\nInput = require './input'\r\nUnit = require './unit'\r\nTeam = require './team'\r\nBullet = require './bullet'\r\nHumanBrain = require './brain/human'\r\nStandardBrain = require './brain/standard'\r\nmeta = require '../content/data/meta'\r\n\r\n\r\nclass World\r\n\r\n  constructor: (@container, @viewsize, @size = 32)->\r\n    @input = new Input\r\n    @size2 = @size * @size\r\n    @gridSize = @viewsize / @size\r\n\r\n    @resolution = 2\r\n    @resolution2 = @resolution * @resolution\r\n    @sizer = @size * @resolution\r\n    @sizer2 = @sizer * @sizer\r\n    @gridSizer = @viewsize / @sizer\r\n\r\n    @field = new Uint8Array @size2\r\n    @dismap = new Int32Array @size2\r\n\r\n\r\n    playerTeam = 1\r\n    @team = []\r\n    base = [{}, {}]\r\n    core = [{}, {}]\r\n\r\n    mapstr = fs.readFileSync path.resolve(__dirname, '../content/data/field1.txt'), 'utf8'\r\n    mapstr = mapstr.replace /\\r*\\n/g, ''\r\n    for v, i in @field\r\n      @field[i] = parseInt mapstr.charAt(i)\r\n      x = i % @size\r\n      y = i / @size | 0\r\n      switch @field[i]\r\n        when 6 then base[0] = {x: x, y: y}\r\n        when 7 then base[1] = {x: x, y: y}\r\n        when 2 then core[0] = {x: x, y: y}\r\n        when 4 then core[1] = {x: x, y: y}\r\n\r\n    @team.push new Team(0, base[0], core[0], 0xffa000)\r\n    @team.push new Team(1, base[1], core[1], 0x00ffff)\r\n\r\n    for t, i in @team\r\n      t.mapsize = @size\r\n      t.mapresolution = @resolution\r\n      t.coredismap = new Int32Array @sizer2 \r\n      @setCoredismap t, @team[1- i].core #TODO:\r\n      memberNum = if playerTeam is i then 3 else 4\r\n      for k in [0...memberNum]\r\n        b = new StandardBrain t\r\n        u = new Unit i, t.base, b\r\n        @addUnit u\r\n\r\n    for v, i in @dismap\r\n      @dismap[i] = if [0, 6, 7, 8].some((v)=> @field[i] is v) then 1 else -1\r\n\r\n    @gField = @setupField()\r\n    @container.addChild @gField\r\n    \r\n    humanBrain = new HumanBrain @input\r\n    @player = new Unit playerTeam, @team[playerTeam].base, humanBrain\r\n    @addUnit @player\r\n\r\n    gStart = @setupStartView()\r\n    @container.addChild gStart\r\n\r\n    gPause = @setupPauseView()\r\n\r\n    @scene = {}\r\n    @scene.init = =>\r\n      (transit)=>\r\n        if @input.keys['z']\r\n          @container.removeChild gStart\r\n          transit 'main'\r\n    \r\n    @scene.main = =>\r\n      pause = false\r\n      @input.on 'space', =>\r\n        pause = not pause\r\n        if pause\r\n          @container.addChild gPause\r\n        else\r\n          @container.removeChild gPause\r\n      (transit)=>\r\n        return if pause\r\n        @updateUnits()\r\n        @updateBullets()\r\n        @team[0].changePoint -100 if @input.keys['o'] # debug\r\n        @team[1].changePoint -100 if @input.keys['p'] # debug\r\n\r\n        result = undefined\r\n        for t, i in @team\r\n          if t.point is 0\r\n            result = if i is playerTeam then false else true\r\n            break\r\n\r\n        if result isnt undefined\r\n          @input.offAll()\r\n          gResult = @setupResultView result\r\n          @container.addChild gResult\r\n          transit 'result'\r\n    \r\n    @scene.result = =>\r\n      (transit)->\r\n\r\n    @phase = null\r\n    @transit = (next)=> @phase = @scene[next]().bind @, @transit\r\n\r\n    @transit 'init'\r\n\r\n  setCoredismap: (team, core)->\r\n    cdm = team.coredismap\r\n    queue = []\r\n    for k in [0, 1]\r\n      for i in [0, 1]\r\n        queue.push\r\n          x: core.x * @resolution + i\r\n          y: core.y * @resolution + k\r\n          v: 1\r\n\r\n    dir = []\r\n    for k in [-1, 0, 1]\r\n      for i in [-1, 0, 1]\r\n        continue if i is 0 and k is 0\r\n        dir.push [i, k]\r\n\r\n    indexify = (x, y)=>\r\n      rx = x * @resolution\r\n      ry = y * @resolution\r\n      res = []\r\n      for k in [0, 1]\r\n        for i in [0, 1]\r\n          res.push (rx + i) + (ry + k) * @sizer\r\n      res\r\n    \r\n    for f, i in @field\r\n      continue if [0, 6, 7, 8].some((u)=> f is u)\r\n      x = i % @size\r\n      y = i / @size | 0\r\n      for index in indexify(x, y)\r\n        cdm[index] = -1\r\n\r\n    while queue.length > 0\r\n      {x, y, v} = queue[0]\r\n      queue.splice 0, 1\r\n      for d in dir\r\n        index = (x + d[0]) + (y + d[1]) * @sizer\r\n        continue unless cdm[index] is 0\r\n        cdm[index] = v\r\n        queue.push\r\n          x: x + d[0]\r\n          y: y + d[1]\r\n          v: v + 1\r\n\r\n    for index in indexify(core.x, core.y)\r\n      cdm[index] = 0\r\n\r\n\r\n  addUnit: (u)->\r\n    t = u.team\r\n    {x, y} = @team[t].base\r\n    u.pos.x = x + util.randf 1\r\n    u.pos.y = y + util.randf 1\r\n    u.ang = if t % 2 then 180 else 0\r\n    g = @setupUnit u\r\n    @container.addChild g\r\n    @team[t].units.push\r\n      i: u\r\n      g: g\r\n\r\n  addBullet: (u)->\r\n    t = u.team\r\n    b = new Bullet {x: u.pos.x, y: u.pos.y}, 0.1, u.shotang, 0.1, u\r\n    g = @setupBullet b\r\n    @container.addChild g\r\n    @team[t].bullets.push\r\n      i: b\r\n      g: g\r\n\r\n  hitCheck: (x, y)->\r\n    return -2 if x < 0.5 or y < 0.5\r\n    return -2 if x > @size - 0.5 or y > @size - 0.5\r\n    i = Math.floor(x - 0.5) + @size * Math.floor(y - 0.5)\r\n    rx = x - 0.5 - Math.floor(x - 0.5)\r\n    ry = y - 0.5 - Math.floor(y - 0.5)\r\n    rx = 0 if rx < 0.0001\r\n    ry = 0 if ry < 0.0001\r\n    d = [@dismap[i], @dismap[i + 1], @dismap[i + @size], @dismap[i + @size + 1]]\r\n    f = [@field[i], @field[i + 1], @field[i + @size], @field[i + @size + 1]]\r\n    \r\n    res =  (1 - rx) * (1 - ry) * d[0] + (1 - rx) * ry * d[2] + rx * (1 - ry) * d[1] + rx * ry * d[3]\r\n    _.remove f, (v)-> v is 0\r\n    \r\n    return {d: res, f: _.uniq f} \r\n\r\n  fix: (unit)->\r\n    poss = unit.getCollider()\r\n    for p in poss\r\n      {d, f} = @hitCheck p.x, p.y\r\n      if d < 0\r\n        rad = (unit.ang + 180) * Math.PI / 180\r\n        unit.pos.x -= d * Math.cos rad\r\n        unit.pos.y -= d * Math.sin rad\r\n        unit.vel = 0.0\r\n\r\n  setupText: (x, y, str, font, color, stylex, styley)->\r\n    text = new PIXI.Text str,\r\n      font: font\r\n      fill: color\r\n      align: stylex\r\n    switch stylex\r\n      when 'left'\r\n        text.position.x = x\r\n      when 'center'\r\n        text.position.x = x - text.width / 2\r\n      when 'right'\r\n        text.position.x = x - text.width\r\n    switch styley\r\n      when 'top'\r\n        text.position.y = y\r\n      when 'center'\r\n        text.position.y = y - text.height / 2\r\n      when 'bottom'\r\n        text.position.y = y - text.height\r\n    return text\r\n\r\n  setupStartView: ->\r\n    g = new PIXI.Graphics\r\n    g.lineStyle 0\r\n      .beginFill 0x333333\r\n      .drawRect 0, 0, @viewsize, @viewsize\r\n      .endFill()\r\n    g.alpha = 0.7\r\n\r\n    text = @setupText @viewsize / 2, @viewsize / 2, 'PRESS Z', '24px Papyrus', 0xffffff, 'center', 'center'\r\n    g.addChild text\r\n\r\n    col = (util.rand(256) << 16) + (util.rand(256) << 8) + (util.rand(256))\r\n    text2 = @setupText @viewsize / 2, @viewsize / 4, 'harmony', '56px Papyrus', col, 'center', 'center'\r\n    filter = new PIXI.filters.BlurFilter\r\n    filter.blur = 32\r\n    text2.filters = [filter]\r\n    g.addChild text2\r\n\r\n    text3 = @setupText @viewsize / 2, @viewsize / 4, 'harmony', '56px Papyrus', 0xffffff, 'center', 'center'\r\n    g.addChild text3\r\n\r\n    text4 = @setupText @viewsize, @viewsize, \"version: #{meta.version}\", '16px Papyrus', 0xffffff, 'right', 'bottom'\r\n    g.addChild text4\r\n\r\n    return g\r\n\r\n  setupPauseView: ->\r\n    g = new PIXI.Graphics\r\n    g.lineStyle 0\r\n      .beginFill 0x333333\r\n      .drawRect 0, 0, @viewsize, @viewsize\r\n      .endFill()\r\n    g.alpha = 0.7\r\n\r\n    text = @setupText @viewsize / 2, @viewsize / 2, 'Pause', '24px Papyrus', 0xffffff, 'center', 'center'\r\n    g.addChild text\r\n\r\n    return g\r\n\r\n  setupResultView: (isWin)->\r\n    filter = new PIXI.filters.BlurFilter\r\n    filter.blur = 24\r\n\r\n    g = new PIXI.Graphics\r\n    g.lineStyle 0\r\n      .beginFill 0x333333\r\n      .drawRect 0, 0, @viewsize, @viewsize\r\n      .endFill()\r\n    g.alpha = 0.7\r\n    col = if isWin then 0xffff00 else 0x00ffff\r\n    str = if isWin then 'You Win' else 'You Lose'\r\n    text = @setupText @viewsize / 2, @viewsize / 2, str, '36px Papyrus', col, 'center', 'center'\r\n    g.addChild text\r\n\r\n    text3 = @setupText @viewsize / 2, @viewsize / 2, str, '36px Papyrus', col, 'center', 'center'\r\n    text3.filters = [filter]\r\n    g.addChild text3\r\n\r\n    text2 = @setupText @viewsize / 2, @viewsize * 3 / 4, 'PRESS ESC or Reload', '16px Papyrus', 0xffffff, 'center', 'bottom'\r\n    g.addChild text2\r\n    \r\n    return g\r\n\r\n  setupField: ->\r\n    g = new PIXI.Graphics\r\n    g2 = new PIXI.Graphics\r\n    filter = new PIXI.filters.BlurFilter\r\n    filter.blur = 7\r\n\r\n    draw = (type, width, color)=>\r\n      \r\n      for v, i in @dismap\r\n        x = i % @size\r\n        y = i / @size | 0\r\n        continue if x > @size - 2\r\n        break if y > @size - 2 \r\n        d = [@dismap[i], @dismap[i + 1], @dismap[i + @size], @dismap[i + @size + 1]]\r\n        f = [@field[i], @field[i + 1], @field[i + @size], @field[i + @size + 1]]\r\n      \r\n        continue unless f.some((v)-> v is type)\r\n      \r\n        p = []\r\n        p.push {x: x + 0.5, y: y} if d[0] * d[1] < 0\r\n        p.push {x: x, y: y + 0.5} if d[0] * d[2] < 0\r\n        p.push {x: x + 1.0, y: y + 0.5} if d[1] * d[3] < 0\r\n        p.push {x: x + 0.5, y: y + 1.0} if d[2] * d[3] < 0\r\n        continue unless p.length is 2\r\n        \r\n        g.lineStyle width, color\r\n          .moveTo (p[0].x + 0.5) * @gridSize, (p[0].y + 0.5) * @gridSize\r\n          .lineTo (p[1].x + 0.5) * @gridSize, (p[1].y + 0.5) * @gridSize\r\n\r\n        g2.lineStyle width * 2, color\r\n          .moveTo (p[0].x + 0.5) * @gridSize, (p[0].y + 0.5) * @gridSize\r\n          .lineTo (p[1].x + 0.5) * @gridSize, (p[1].y + 0.5) * @gridSize\r\n\r\n    draw 1, 2, 0x00ff7f\r\n    draw 2, 2, 0xff7f00\r\n    draw 3, 2, 0xff3000\r\n    draw 4, 2, 0x00a0ff\r\n    draw 5, 2, 0x0050ff\r\n\r\n    filter2 = new PIXI.filters.BlurFilter\r\n    filter2.blur = 32\r\n\r\n    for t in @team\r\n      str = \"#{t.point}\"\r\n      col = 0xffffff\r\n      x = (t.base.x + 0.5) * @gridSize\r\n      y = (t.base.y + 0.5) * @gridSize\r\n      t.scoreborad = @setupText x, y, str, '36px Papyrus', col, 'center', 'center'\r\n      t.scoreborad2 = @setupText x, y, str, '36px Papyrus', t.color, 'center', 'center'\r\n      t.scoreborad2.filters = [filter2]\r\n      t.scoreborad.alpha = 0.7\r\n      \r\n      t.scoreboradUpdate = do =>\r\n        gs = @gridSize\r\n        ->\r\n          x = (@base.x + 0.5) * gs\r\n          y = (@base.y + 0.5) * gs\r\n          @scoreborad.text = \"#{@point}\" \r\n          @scoreborad2.text = @scoreborad.text\r\n          @scoreborad.position.x = x - @scoreborad.width / 2\r\n          @scoreborad.position.y = y - @scoreborad.height / 2\r\n          @scoreborad2.position  = @scoreborad.position\r\n      \r\n      g.addChild t.scoreborad2\r\n      g.addChild t.scoreborad\r\n\r\n    g.blendMode = PIXI.BLEND_MODES.ADD\r\n    g.alpha = 0.7\r\n    #g2.alpha = 0.5\r\n    g2.filters = [filter]\r\n\r\n    g.addChild g2\r\n\r\n    for t, ti in @team\r\n      continue unless ti is 0\r\n      for d, i in t.coredismap\r\n        continue unless d > 0\r\n        x = i % @sizer\r\n        y = i / @sizer | 0\r\n        tx = (x + 0.5) * @gridSizer\r\n        ty = (y + 0.5) * @gridSizer\r\n        text = @setupText tx, ty, \"#{d}\", '8px', 0xffffff, 'center', 'center'\r\n        #g.addChild text\r\n\r\n    return g\r\n\r\n  setupBullet: (b)->\r\n    g = new PIXI.Graphics\r\n    \r\n    p0x = b.pos.x * @gridSize\r\n    p0y = b.pos.y * @gridSize\r\n    size = b.size * @gridSize\r\n\r\n    g.lineStyle 1, @team[b.team].color\r\n      .drawCircle 0, 0, size\r\n\r\n    g.position.x = p0x\r\n    g.position.y = p0y \r\n\r\n    return g\r\n\r\n  setupUnit: (unit)->\r\n    g = new PIXI.Graphics\r\n    \r\n    p0x = unit.pos.x * @gridSize\r\n    p0y = unit.pos.y * @gridSize\r\n    size = unit.size * @gridSize\r\n\r\n    p1x = size\r\n    p1y = 0\r\n\r\n    rad = -150 * Math.PI / 180\r\n    p2x = size * Math.cos rad\r\n    p2y = size * Math.sin rad\r\n\r\n    rad = 150 * Math.PI / 180\r\n    p3x = size * Math.cos rad\r\n    p3y = size * Math.sin rad\r\n    \r\n    g.lineStyle 2, @team[unit.team].color\r\n      .moveTo p1x, p1y\r\n      .lineTo p2x, p2y\r\n      .lineTo 0, 0\r\n      .lineTo p3x, p3y\r\n      .lineTo p1x, p1y\r\n\r\n    unit.scoreborad = @setupText p0x + size * 1.4, p0y - size * 1.4, \"#{unit.hp}\", '14px Papyrus', 0xffffff, 'center', 'center'\r\n    unit.scoreboradUpdate = do =>\r\n      gs = @gridSize\r\n      ->\r\n        p0x = @pos.x * gs\r\n        p0y = @pos.y * gs\r\n        size = @size * gs\r\n        @scoreborad.text = \"#{@hp}\"\r\n        @scoreborad.position.x = p0x + size * 1.4\r\n        @scoreborad.position.y = p0y - size * 1.4\r\n\r\n    @container.addChild unit.scoreborad\r\n    g.position.x = p0x\r\n    g.position.y = p0y \r\n    g.rotation = unit.ang * Math.PI / 180\r\n\r\n    return g\r\n\r\n  updateUnits: ->\r\n    for t in @team\r\n      for u in t.units\r\n        u.i.update (v)=> @addBullet v\r\n        @fix u.i\r\n\r\n        for t in @team\r\n          continue if u.i.team is t.id \r\n          p1 = u.i.pos\r\n          r1 = u.i.size / 2\r\n          for b in t.bullets\r\n            p2 = b.i.pos\r\n            r2 = b.i.size\r\n            if Math.pow(p1.x - p2.x, 2) + Math.pow(p1.y - p2.y, 2) < Math.pow(r1 + r2, 2)\r\n              b.i.removeflag = true\r\n              u.i.hp--\r\n              u.i.scoreboradUpdate()\r\n\r\n        u.g.position.x = u.i.pos.x * @gridSize\r\n        u.g.position.y = u.i.pos.y * @gridSize\r\n        u.g.rotation = u.i.ang * Math.PI / 180\r\n\r\n  updateBullets: ->\r\n    for t in @team\r\n      removeList = []\r\n      for b, i in t.bullets\r\n        b.i.update()\r\n        poss = b.i.getCollider()\r\n        for p in poss\r\n          {d, f} = @hitCheck p.x, p.y\r\n          if d < 0\r\n            b.i.removeflag = true\r\n            for type in f\r\n              switch type\r\n                when 2\r\n                  break if b.i.team is 0\r\n                  @team[0].changePoint -1\r\n                when 4\r\n                  break if b.i.team is 1\r\n                  @team[1].changePoint -1\r\n\r\n        b.g.position.x = b.i.pos.x * @gridSize\r\n        b.g.position.y = b.i.pos.y * @gridSize\r\n        b.g.rotation = b.i.rad\r\n\r\n        if b.i.removeflag\r\n          removeList.push i\r\n          @container.removeChild b.g \r\n\r\n      _.remove t.bullets, (v, k)-> removeList.some((u)-> u is k)\r\n\r\n\r\n  update: ->\r\n    location.reload() if @input.keys['esc']\r\n    @phase()\r\n\r\nmodule.exports = World\r\n","module.exports = \r\n  IDOL: 0\r\n  MOVE:\r\n    TOP:    1\r\n    BOTTOM: 2\r\n    LEFT:   3\r\n    RIGHT:  4\r\n  ATTACK:\r\n    AIM:    5\r\n    FOWARD: 6","class Brain\r\n  constructor: ()->\r\n\r\n\r\n  update: (unit)->\r\n\r\n\r\nmodule.exports = Brain\r\n","Brain = require '../brain'\r\nACTION = require '../actions'\r\n\r\nclass HumanBrain extends Brain\r\n  constructor: (@input)->\r\n    super()\r\n\r\n\r\n  update: (unit)->\r\n    super unit\r\n    acts = []  \r\n\r\n    if @input.keys['up']\r\n      acts.push ACTION.MOVE.TOP\r\n    if @input.keys['down']\r\n      acts.push ACTION.MOVE.BOTTOM\r\n    if @input.keys['right']\r\n      acts.push ACTION.MOVE.RIGHT\r\n    if @input.keys['left']\r\n      acts.push ACTION.MOVE.LEFT\r\n    if @input.keys['z']\r\n      acts.push ACTION.ATTACK.AIM\r\n      \r\n    \r\n    acts\r\n\r\nmodule.exports = HumanBrain","util = require '../util'\r\nBrain = require '../brain'\r\nACTION = require '../actions'\r\n\r\nclass StandardBrain extends Brain\r\n  constructor: (@team)->\r\n    super()\r\n    @prevacts = []\r\n\r\n  update: (unit)->\r\n    super unit\r\n\r\n    if util.rand 10\r\n      return @prevacts\r\n\r\n    acts = [] \r\n\r\n    dir = []\r\n    for k in [-1, 0, 1]\r\n      for i in [-1, 0, 1]\r\n        continue if i is 0 and k is 0\r\n        dir.push [i, k]\r\n\r\n    {x, y} = unit.pos\r\n    mx = Math.ceil x * @team.mapresolution\r\n    my = Math.ceil y * @team.mapresolution\r\n    cd = @team.coredismap[mx + my * @team.mapsize * @team.mapresolution]\r\n    \r\n    if util.rand 5\r\n      mind = cd\r\n      cand = []\r\n      for d in dir\r\n        index = (mx + d[0]) + (my + d[1]) * @team.mapsize * @team.mapresolution\r\n        dis = @team.coredismap[index]\r\n        continue if dis < 0\r\n        if dis is mind\r\n          cand.push d\r\n        else if dis < mind\r\n          cand = [d]\r\n          mind = dis\r\n    \r\n      if cand.length > 0\r\n        d = util.randArray cand\r\n        switch d[0]\r\n          when -1 then acts.push ACTION.MOVE.LEFT\r\n          when 1 then acts.push ACTION.MOVE.RIGHT\r\n        switch d[1]\r\n          when -1 then acts.push ACTION.MOVE.TOP\r\n          when 1 then acts.push ACTION.MOVE.BOTTOM\r\n    else\r\n      acts.push util.randArray([\r\n        ACTION.MOVE.TOP, \r\n        ACTION.MOVE.BOTTOM, \r\n        ACTION.MOVE.LEFT, \r\n        ACTION.MOVE.RIGHT\r\n      ])\r\n    \r\n\r\n    acts.push ACTION.ATTACK.AIM\r\n\r\n    return @prevacts = acts\r\n\r\nmodule.exports = StandardBrain","class Bullet\r\n  constructor: (@pos, @size, ang, @vel, @parent)->\r\n    @rad = ang * Math.PI / 180\r\n    @team = @parent.team\r\n    @r = 0\r\n    \r\n  getCollider: ->\r\n    colls = []\r\n    colls.push\r\n      x: @pos.x # + @size * Math.cos @rad\r\n      y: @pos.y # + @size * Math.sin @rad\r\n    colls\r\n\r\n  update: ->\r\n    @pos.x += @vel * Math.cos @rad\r\n    @pos.y += @vel * Math.sin @rad\r\n    @r += @vel\r\n\r\nmodule.exports = Bullet\r\n","class Input\r\n  constructor: (@domElement = document)->\r\n    @keys = {}\r\n    @listener = {}\r\n\r\n    @keyMap =\r\n      8: 'backspace'\r\n      13: 'enter'\r\n      16: 'shift'\r\n      17: 'ctrl'\r\n      18: 'alt'\r\n      27: 'esc'\r\n      32: 'space'\r\n      37: 'left'\r\n      38: 'up'\r\n      39: 'right'\r\n      40: 'down'\r\n\r\n    mapper = (keycode, status)=>\r\n      key: @keyMap[keycode] or String.fromCharCode(keycode).toLowerCase()\r\n      status: status\r\n\r\n    keydown = Bacon.fromEventTarget(@domElement, 'keydown').map (e)=> mapper.call @, e.keyCode, true\r\n    keyup = Bacon.fromEventTarget(@domElement, 'keyup').map (e)=> mapper.call @, e.keyCode, false\r\n    keydown.merge(keyup).filter (e)->\r\n      code = e.key.charCodeAt 0\r\n      47 < code < 58 or 96 < code < 123\r\n    .onValue (e)=>\r\n      @keys[e.key] = e.status\r\n      return unless e.status \r\n      @listener[e.key]?.forEach (v)-> do v\r\n\r\n    buttons = [1, 2]\r\n    \r\n    mouseEvent = (type)=>\r\n      listener = {}\r\n      buttons.forEach (e)-> listener[e] = []\r\n      Bacon.fromEventTarget @domElement, type\r\n        .filter (e)-> e.button in buttons\r\n        .onValue (e)-> listener[e.button].forEach (v)-> v e.clientX, e.clientY\r\n      [ \r\n        (btn, cb)-> listener[btn]?.push cb,\r\n        (btn, cb)-> _.remove listener[btn], (v)-> if cb? then v is cb else true\r\n      ]\r\n\r\n    [@onMouseDown, @offMouseDown] = mouseEvent 'mousedown'\r\n    [@onMouseUp, @offMouseUp] = mouseEvent 'mouseup'\r\n    [@onDoubleClick, @offDoubleClick] = _.transform mouseEvent('dblclick'), (res, e)-> res.push e.bind @, 1\r\n\r\n    [@onMouseMove, @offMouseMove] = do =>\r\n      listener = {}\r\n      active = {}\r\n      buttons.forEach (e)-> \r\n        active[e] = false\r\n        listener[e] = []\r\n      md = Bacon.fromEventTarget(@domElement, 'mousedown').map (e)-> [e.button, true]\r\n      mu = Bacon.fromEventTarget(@domElement, 'mouseup').map (e)-> [e.button, false]\r\n      md.merge(mu).onValue (e)-> active[e[0]] = e[1] if active[e[0]]?\r\n      Bacon.fromEventTarget(@domElement, 'mousemove').onValue (e)->\r\n        for own k, v of listener\r\n          v.forEach (u)-> u e.clientX, e.clientY if active[k] \r\n      [\r\n        (btn, cb)-> listener[btn]?.push cb,\r\n        (btn, cb)-> _.remove listener[btn], (v)-> if cb? then v is cb else true\r\n      ]\r\n\r\n    @offAll = =>\r\n      buttons.forEach (v)=>\r\n        @offMouseDown v\r\n        @offMouseUp v\r\n        @offMouseMove v\r\n      @offDoubleClick()\r\n      @listener = {}\r\n        \r\n\r\n  on: (key, cb)->\r\n    return @listener[key].push cb if @listener[key]\r\n    @listener[key] = [cb]\r\n\r\n  off: (key, cb)->\r\n    _.remove @listener[key], (v)-> v is cb\r\n\r\n\r\nmodule.exports = Input","'use strict'\r\n\r\nView = require './view'\r\nWorld = require './World'\r\n\r\nclass Main \r\n  constructor: ->\r\n    @view = new View\r\n    @world = new World @view.container, @view.size\r\n    \r\n  loop: ->\r\n    requestAnimationFrame => @loop()\r\n    @view.render => @world.update()\r\n\r\n$ -> do new Main().loop\r\n","module.exports = \r\n  INIT: 0\r\n  READY: 1\r\n  ACTIVE: 2\r\n  DEAD: 3","\r\nclass Team\r\n  constructor: (@id, @base, @core, @color, @point = 100)->\r\n    @units = []\r\n    @bullets = []\r\n\r\n  changePoint: (diff)->\r\n    @point += diff\r\n    @point = Math.max 0, @point\r\n    @scoreboradUpdate()\r\n\r\n  eachMembers: (f)->\r\n    f u for u in @units\r\n\r\nmodule.exports = Team","ACTION = require './actions'\r\nSTATUS = require './status'\r\nutil = require './util'\r\n\r\nclass Unit \r\n  constructor: (@team, @base, @brain)->\r\n    @pos = {x: 0, y: 0}\r\n    @ang = if @team % 2 then 180 else 0\r\n    @shotang = 0.0\r\n    @hp = 10\r\n    @size = 0.2\r\n    @vel = 0.0\r\n    @shotInterval = 0\r\n    @status = STATUS.ACTIVE\r\n    @respawnCount = 0\r\n\r\n  getCollider: ->\r\n    colls = []\r\n    rad = @ang * Math.PI / 180\r\n    colls.push\r\n      x: @pos.x + @size * Math.cos rad\r\n      y: @pos.y + @size * Math.sin rad\r\n    ###\r\n    rad = (@ang - 150) * Math.PI / 180\r\n    colls.push\r\n      x: @pos.x + @size * Math.cos rad\r\n      y: @pos.y + @size * Math.sin rad\r\n    rad = (@ang + 150) * Math.PI / 180\r\n    colls.push\r\n      x: @pos.x + @size * Math.cos rad\r\n      y: @pos.y + @size * Math.sin rad\r\n    ###\r\n    colls\r\n\r\n  action: (actions, shot)->\r\n    moveflag = 0\r\n    aimflag = false\r\n    shotflag = false\r\n    angs = [undefined, -90, 90, undefined, 180, -135, 135, 180, 0, -45, 45, 0, undefined, -90, 90, undefined]\r\n    for act in actions\r\n      switch act\r\n        when ACTION.MOVE.TOP\r\n          moveflag += 1\r\n        when ACTION.MOVE.BOTTOM\r\n          moveflag += 2\r\n        when ACTION.MOVE.LEFT\r\n          moveflag += 4\r\n        when ACTION.MOVE.RIGHT\r\n          moveflag += 8  \r\n        when ACTION.ATTACK.AIM\r\n          aimflag = true\r\n          shotflag = true\r\n        when ACTION.ATTACK.FOWARD\r\n          shotflag = true\r\n    if angs[moveflag]?\r\n      @ang = angs[moveflag]\r\n      @vel = if aimflag then 0.04 else 0.07\r\n    else\r\n      @vel = 0\r\n\r\n    @shotang = @ang \r\n    @shotInterval-- if @shotInterval > 0\r\n\r\n    if shotflag and @shotInterval is 0\r\n      @shotInterval = 20\r\n      shot @\r\n\r\n  update: (shot)->\r\n    switch @status\r\n      when STATUS.READY\r\n        if @respawnCount is 0\r\n          @status = STATUS.ACTIVE\r\n          @pos.x = @base.x + util.randf 1\r\n          @pos.y = @base.y + util.randf 1\r\n          @hp = 10\r\n          @ang = if @team % 2 then 180 else 0\r\n        else\r\n          @respawnCount--\r\n      when STATUS.ACTIVE\r\n        @action @brain.update(@), shot\r\n        \r\n        rad = @ang * Math.PI / 180\r\n        @pos.x += @vel * Math.cos rad\r\n        @pos.y += @vel * Math.sin rad\r\n        @vel = @vel * 0.7\r\n        @vel = 0.0 if @vel * @vel < 0.0001\r\n\r\n       \r\n\r\n        if @hp <= 0\r\n          @status = STATUS.DEAD\r\n\r\n      when STATUS.DEAD\r\n        @pos.x = -100\r\n        @pos.y = -100\r\n        @status = STATUS.READY\r\n        @respawnCount = 180\r\n\r\n     @scoreboradUpdate()\r\n\r\n\r\nmodule.exports = Unit\r\n","class Utility\r\n  @rand = (n)->\r\n    Math.floor Math.random() * n\r\n\r\n  @randf = (n)->\r\n    Math.random() * n\r\n\r\n  @randRange = (min, max)->\r\n    Math.floor(Math.random() * (max - min + 1)) + min\r\n  \r\n  @randArray = (arr)->\r\n    arr[Math.floor Math.random() * arr.length]\r\n\r\n\r\nmodule.exports = Utility","class View\r\n  constructor: ->\r\n\r\n    @size = 640\r\n    \r\n    @renderer = PIXI.autoDetectRenderer @size, @size,\r\n        backgroundColor: 0x000000\r\n        antialias: true\r\n        #transparent: true\r\n    $(document.body).append @renderer.view\r\n\r\n    @container = new PIXI.Container\r\n\r\n    @stats = new Stats\r\n    @stats.setMode 0  # 0: fps, 1: ms, 2: mb\r\n    @stats.domElement.style.position = 'absolute'\r\n    @stats.domElement.style.right = '0px'\r\n    @stats.domElement.style.top = '0px'\r\n    $(document.body).append @stats.domElement\r\n\r\n  render: (updater)->\r\n    @stats.begin()\r\n    updater()\r\n    @renderer.render @container\r\n    @stats.end()\r\n\r\n\r\nmodule.exports = View\r\n"],"sourceRoot":"./src"}