{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","content/data/meta.json","bundle.js","node_modules/browserify/node_modules/path-browserify/index.js","node_modules/browserify/node_modules/process/browser.js","src/World.coffee","src/actions.coffee","src/brain.coffee","src/brain/attacker.coffee","src/brain/defender.coffee","src/brain/human.coffee","src/bullet.coffee","src/input.coffee","src/main.coffee","src/status.coffee","src/team.coffee","src/unit.coffee","src/util.coffee","src/view.coffee"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","version",2,"process","normalizeArray","parts","allowAboveRoot","up","last","splice","unshift","filter","xs","res","push","splitPathRe","splitPath","filename","exec","slice","resolve","resolvedPath","resolvedAbsolute","arguments","path","cwd","TypeError","charAt","split","p","join","normalize","isAbsolute","trailingSlash","substr","paths","Array","prototype","index","relative","from","to","trim","arr","start","end","fromParts","toParts","Math","min","samePartsLength","outputParts","concat","sep","delimiter","dirname","result","root","dir","basename","ext","extname","str","len","this","_process",3,"cleanUpNextTick","draining","currentQueue","queue","queueIndex","drainQueue","timeout","setTimeout","run","clearTimeout","Item","fun","array","noop","nextTick","args","apply","title","browser","env","argv","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","binding","name","chdir","umask",4,"AttackerBrain","Bullet","DefenderBrain","HumanBrain","Input","Team","Unit","World","meta","util","container","viewsize","size1","b","base","core","defnum","gPause","gStart","humanBrain","j","k","len1","len2","len3","m","mapstr","memberNum","playerTeam","ref","ref1","ref2","ref3","ref4","v","x","y","size","input","size2","gridSize","resolution","resolution2","sizer","sizer2","gridSizer","sizerm","field","Uint8Array","dismap","Int32Array","team","replace","parseInt","mapsize","mapresolution","coredismap","coredirmap","enemydismap","setCoredismap","setCoredirmap","rand","addUnit","setEnemydismap","units","some","_this","gField","setupField","addChild","player","setupStartView","setupPauseView","scene","init","transit","keys","removeChild","main","pause","gResult","len4","q","ref5","updateUnits","updateBullets","changePoint","point","offAll","setupResultView","phase","next","bind","cdm","d","indexify","len5","ref6","ref7","results","rx","ry","edm","ceil","pos","len6","results1","g","randf","ang","setupUnit","addBullet","shotang","setupBullet","bullets","hitCheck","floor","_","remove","uniq","fix","unit","poss","rad","getCollider","PI","cos","sin","vel","setupText","font","color","stylex","styley","text","PIXI","Text","fill","align","position","width","height","col","text2","text3","text4","Graphics","lineStyle","beginFill","drawRect","endFill","alpha","filters","BlurFilter","blur","isWin","draw","filter2","g2","type","moveTo","lineTo","scoreborad","scoreborad2","scoreboradUpdate","gs","blendMode","BLEND_MODES","ADD","p0x","p0y","drawCircle","p1x","p1y","p2x","p2y","p3x","p3y","hp","rotation","getNear","limit","r2","pow","atan2","p1","p2","r1","ti","update","id","removeflag","removeList","location","reload","../content/data/meta","./brain/attacker","./brain/defender","./brain/human","./bullet","./input","./team","./unit","./util",5,"IDOL","MOVE","TOP","BOTTOM","LEFT","RIGHT","ATTACK","AIM","FOWARD",6,"Brain",7,"ACTION","extend","child","parent","ctor","constructor","key","hasProp","__super__","hasOwnProperty","superClass","prevacts","near","acts","angs","cand","cd","cdr","dis","dis2","index2","mind","mx","my","randArray","../actions","../brain","../util",8,"ed",9,10,"colls","rad45",11,"indexOf","item","domElement","buttons","keydown","keyup","mapper","mouseEvent","document","listener","keyMap",13,16,17,18,27,32,37,38,39,40,"keycode","status","String","fromCharCode","toLowerCase","Bacon","fromEventTarget","map","keyCode","merge","charCodeAt","onValue","forEach","button","clientX","clientY","btn","cb","onMouseDown","offMouseDown","onMouseUp","offMouseUp","transform","onDoubleClick","offDoubleClick","active","md","mu","onMouseMove","offMouseMove",12,"Main","View","view","world","loop","requestAnimationFrame","render","$","./World","./view","INIT","READY","ACTIVE","DEAD",14,"diff","max","eachMembers",15,"STATUS","brain","fullhp","shotInterval","respawnCount","action","actions","shot","act","aimflag","moveflag","shotflag","./actions","./status","Utility","random","randRange","renderer","autoDetectRenderer","backgroundColor","antialias","body","append","Container","stats","Stats","setMode","style","right","top","updater","begin"],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","module.exports={\r\n  \"version\": \"0.0.1\"\r\n}",null,"// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// Split a filename into [root, dir, basename, ext], unix version\n// 'root' is just a slash, or nothing.\nvar splitPathRe =\n    /^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/;\nvar splitPath = function(filename) {\n  return splitPathRe.exec(filename).slice(1);\n};\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function(path) {\n  var result = splitPath(path),\n      root = result[0],\n      dir = result[1];\n\n  if (!root && !dir) {\n    // No dirname whatsoever\n    return '.';\n  }\n\n  if (dir) {\n    // It has a dirname, strip trailing slash\n    dir = dir.substr(0, dir.length - 1);\n  }\n\n  return root + dir;\n};\n\n\nexports.basename = function(path, ext) {\n  var f = splitPath(path)[2];\n  // TODO: make this comparison case-insensitive on windows?\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\n\nexports.extname = function(path) {\n  return splitPath(path)[3];\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n","// shim for using process in browser\n\nvar process = module.exports = {};\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = setTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    clearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        setTimeout(drainQueue, 0);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","path = require 'path'\r\nfs = require 'fs'\r\n\r\nutil = require './util'\r\nInput = require './input'\r\nUnit = require './unit'\r\nTeam = require './team'\r\nBullet = require './bullet'\r\nHumanBrain = require './brain/human'\r\nAttackerBrain = require './brain/attacker'\r\nDefenderBrain = require './brain/defender'\r\nmeta = require '../content/data/meta'\r\n\r\n\r\nclass World\r\n\r\n  constructor: (@container, @viewsize, @size = 32)->\r\n    @input = new Input\r\n    @size2 = @size * @size\r\n    @gridSize = @viewsize / @size\r\n\r\n    @resolution = 2\r\n    @resolution2 = @resolution * @resolution\r\n    @sizer = @size * @resolution\r\n    @sizer2 = @sizer * @sizer\r\n    @gridSizer = @viewsize / @sizerm\r\n\r\n    @field = new Uint8Array @size2\r\n    @dismap = new Int32Array @size2\r\n\r\n\r\n    playerTeam = 1\r\n    @team = []\r\n    base = [{}, {}]\r\n    core = [{}, {}]\r\n\r\n    mapstr = fs.readFileSync path.resolve(__dirname, '../content/data/field1.txt'), 'utf8'\r\n    mapstr = mapstr.replace /\\r*\\n/g, ''\r\n    for v, i in @field\r\n      @field[i] = parseInt mapstr.charAt(i)\r\n      x = i % @size\r\n      y = i / @size | 0\r\n      switch @field[i]\r\n        when 6 then base[0] = {x: x, y: y}\r\n        when 7 then base[1] = {x: x, y: y}\r\n        when 2 then core[0] = {x: x, y: y}\r\n        when 4 then core[1] = {x: x, y: y}\r\n\r\n    @team.push new Team(0, base[0], core[0], 0xffa000)\r\n    @team.push new Team(1, base[1], core[1], 0x00ffff)\r\n\r\n    for t, i in @team\r\n      t.mapsize = @size\r\n      t.mapresolution = @resolution\r\n      t.coredismap = new Int32Array @sizer2 \r\n      t.coredirmap = new Int32Array @sizer2\r\n      t.enemydismap = new Int32Array @sizer2\r\n      @setCoredismap t, @team[1 - i].core #TODO:\r\n      @setCoredirmap t, @team[1 - i].core\r\n      memberNum = if playerTeam is i then 3 else 4\r\n      defnum = util.rand(memberNum / 2 + 1) + 1\r\n      for k in [0...memberNum]\r\n        if k < defnum\r\n          b = new DefenderBrain t\r\n        else \r\n          b = new AttackerBrain t\r\n        u = new Unit i, t.base, b\r\n        @addUnit u\r\n\r\n    for t, i in @team\r\n      @setEnemydismap t, @team[1 - i].units\r\n\r\n    for v, i in @dismap\r\n      @dismap[i] = if [0, 6, 7, 8].some((v)=> @field[i] is v) then 1 else -1\r\n\r\n    @gField = @setupField()\r\n    @container.addChild @gField\r\n    \r\n    humanBrain = new HumanBrain @input\r\n    @player = new Unit playerTeam, @team[playerTeam].base, humanBrain\r\n    @addUnit @player\r\n\r\n    gStart = @setupStartView()\r\n    @container.addChild gStart\r\n\r\n    gPause = @setupPauseView()\r\n\r\n    @scene = {}\r\n    @scene.init = =>\r\n      (transit)=>\r\n        if @input.keys['z']\r\n          @container.removeChild gStart\r\n          transit 'main'\r\n    \r\n    @scene.main = =>\r\n      pause = false\r\n      @input.on 'space', =>\r\n        pause = not pause\r\n        if pause\r\n          @container.addChild gPause\r\n        else\r\n          @container.removeChild gPause\r\n      (transit)=>\r\n        return if pause\r\n        @updateUnits()\r\n        @updateBullets()\r\n        @team[0].changePoint -100 if @input.keys['o'] # debug\r\n        @team[1].changePoint -100 if @input.keys['p'] # debug\r\n\r\n        result = undefined\r\n        for t, i in @team\r\n          if t.point is 0\r\n            result = if i is playerTeam then false else true\r\n            break\r\n\r\n        if result isnt undefined\r\n          @input.offAll()\r\n          gResult = @setupResultView result\r\n          @container.addChild gResult\r\n          transit 'result'\r\n    \r\n    @scene.result = =>\r\n      (transit)->\r\n\r\n    @phase = null\r\n    @transit = (next)=> @phase = @scene[next]().bind @, @transit\r\n\r\n    @transit 'init'\r\n\r\n  setCoredismap: (team, core)->\r\n    cdm = team.coredismap\r\n    queue = []\r\n    for k in [0...@resolution]\r\n      for i in [0...@resolution]\r\n        queue.push\r\n          x: core.x * @resolution + i\r\n          y: core.y * @resolution + k\r\n          v: 1\r\n\r\n    dir = []\r\n    for k in [-1, 0, 1]\r\n      for i in [-1, 0, 1]\r\n        continue if i is 0 and k is 0\r\n        dir.push [i, k]\r\n\r\n    indexify = (x, y)=>\r\n      rx = x * @resolution\r\n      ry = y * @resolution\r\n      res = []\r\n      for k in [0...@resolution]\r\n        for i in [0...@resolution]\r\n          res.push (rx + i) + (ry + k) * @sizer\r\n      res\r\n    \r\n    for f, i in @field\r\n      continue if [0, 6, 7, 8].some((u)=> f is u)\r\n      x = i % @size\r\n      y = i / @size | 0\r\n      for index in indexify(x, y)\r\n        cdm[index] = -1\r\n\r\n    while queue.length > 0\r\n      {x, y, v} = queue[0]\r\n      queue.splice 0, 1\r\n      for d in dir\r\n        index = (x + d[0]) + (y + d[1]) * @sizer\r\n        continue unless cdm[index] is 0\r\n        cdm[index] = v\r\n        queue.push\r\n          x: x + d[0]\r\n          y: y + d[1]\r\n          v: v + 1\r\n\r\n    for index in indexify(core.x, core.y)\r\n      cdm[index] = 0\r\n\r\n  setCoredirmap: (team, core)->\r\n    cdm = team.coredirmap\r\n    queue = []\r\n    for k in [0...@resolution]\r\n      queue.push\r\n        x: core.x * @resolution + k\r\n        y: core.y * @resolution\r\n        dir: 3\r\n      queue.push\r\n        x: core.x * @resolution + k\r\n        y: core.y * @resolution + @resolution - 1\r\n        dir: 4\r\n      queue.push\r\n        x: core.x * @resolution\r\n        y: core.y * @resolution + k\r\n        dir: 1\r\n      queue.push\r\n        x: core.x * @resolution + @resolution - 1\r\n        y: core.y * @resolution + k\r\n        dir: 2\r\n\r\n    indexify = (x, y)=>\r\n      rx = x * @resolution\r\n      ry = y * @resolution\r\n      res = []\r\n      for k in [0...@resolution]\r\n        for i in [0...@resolution]\r\n          res.push (rx + i) + (ry + k) * @sizer\r\n      res\r\n    \r\n    for f, i in @field\r\n      continue if [0, 6, 7, 8].some((u)=> f is u)\r\n      x = i % @size\r\n      y = i / @size | 0\r\n      for index in indexify(x, y)\r\n        cdm[index] = -1\r\n\r\n    while queue.length > 0\r\n      {x, y, dir} = queue[0]\r\n      queue.splice 0, 1\r\n      d = [0, 0]\r\n      d[0] = if dir < 3 then (dir - 1) * 2 - 1 else 0\r\n      d[1] = if dir > 2 then (dir - 3) * 2 - 1 else 0\r\n      index = (x + d[0]) + (y + d[1]) * @sizer\r\n      unless cdm[index] is -1\r\n        cdm[index] = dir\r\n        queue.push\r\n          x: x + d[0]\r\n          y: y + d[1]\r\n          dir: dir\r\n\r\n    for index in indexify(core.x, core.y)\r\n      cdm[index] = 0\r\n\r\n\r\n  setEnemydismap: (team, units)->\r\n    for t, i in team.enemydismap\r\n      team.enemydismap[i] = 0\r\n\r\n    edm = team.enemydismap\r\n    queue = []\r\n    dir = []\r\n    for k in [-1, 0, 1]\r\n      for i in [-1, 0, 1]\r\n        continue if i is 0 and k is 0\r\n        dir.push [i, k]\r\n    \r\n    indexify = (x, y)=>\r\n      rx = x * @resolution\r\n      ry = y * @resolution\r\n      res = []\r\n      for k in [0...@resolution]\r\n        for i in [0...@resolution]\r\n          res.push (rx + i) + (ry + k) * @sizer\r\n      res\r\n    \r\n    for u in units\r\n      x = Math.ceil(u.i.pos.x * @resolution)\r\n      y = Math.ceil(u.i.pos.y * @resolution) \r\n      \r\n      queue.push\r\n        x: x\r\n        y: y\r\n        v: 1\r\n\r\n    x = Math.ceil(team.core.x * @resolution) + util.rand(8) - 4\r\n    y = Math.ceil(team.core.y * @resolution) + util.rand(8) - 4\r\n    queue.push\r\n      x: x\r\n      y: y\r\n      v: 1\r\n    \r\n    for f, i in @field\r\n      continue if [0, 6, 7, 8].some((u)=> f is u)\r\n      x = i % @size\r\n      y = i / @size | 0\r\n      for index in indexify(x, y)\r\n        edm[index] = -1\r\n\r\n    while queue.length > 0\r\n      {x, y, v} = queue[0]\r\n      queue.splice 0, 1\r\n      for d in dir\r\n        index = (x + d[0]) + (y + d[1]) * @sizer\r\n        continue unless edm[index] is 0\r\n        edm[index] = v\r\n        continue if v > 20\r\n        queue.push\r\n          x: x + d[0]\r\n          y: y + d[1]\r\n          v: v + 1\r\n\r\n  addUnit: (u)->\r\n    t = u.team\r\n    {x, y} = @team[t].base\r\n    u.pos.x = x + util.randf 1\r\n    u.pos.y = y + util.randf 1\r\n    u.ang = if t % 2 then 180 else 0\r\n    g = @setupUnit u\r\n    @container.addChild g\r\n    @team[t].units.push\r\n      i: u\r\n      g: g\r\n\r\n  addBullet: (u)->\r\n    t = u.team\r\n    b = new Bullet {x: u.pos.x, y: u.pos.y}, 0.2, u.shotang, 0.1, u\r\n    g = @setupBullet b\r\n    @container.addChild g\r\n    @team[t].bullets.push\r\n      i: b\r\n      g: g\r\n\r\n  hitCheck: (x, y)->\r\n    return -2 if x < 0.5 or y < 0.5\r\n    return -2 if x > @size - 0.5 or y > @size - 0.5\r\n    i = Math.floor(x - 0.5) + @size * Math.floor(y - 0.5)\r\n    rx = x - 0.5 - Math.floor(x - 0.5)\r\n    ry = y - 0.5 - Math.floor(y - 0.5)\r\n    rx = 0 if rx < 0.0001\r\n    ry = 0 if ry < 0.0001\r\n    d = [@dismap[i], @dismap[i + 1], @dismap[i + @size], @dismap[i + @size + 1]]\r\n    f = [@field[i], @field[i + 1], @field[i + @size], @field[i + @size + 1]]\r\n    \r\n    res =  (1 - rx) * (1 - ry) * d[0] + (1 - rx) * ry * d[2] + rx * (1 - ry) * d[1] + rx * ry * d[3]\r\n    _.remove f, (v)-> v is 0\r\n    \r\n    return {d: res, f: _.uniq f} \r\n\r\n  fix: (unit)->\r\n    poss = unit.getCollider()\r\n    for p in poss\r\n      {d, f} = @hitCheck p.x, p.y\r\n      if d < 0\r\n        rad = (unit.ang + 180) * Math.PI / 180\r\n        unit.pos.x -= d * Math.cos rad\r\n        unit.pos.y -= d * Math.sin rad\r\n        unit.vel = 0.0\r\n\r\n  setupText: (x, y, str, font, color, stylex, styley)->\r\n    text = new PIXI.Text str,\r\n      font: font\r\n      fill: color\r\n      align: stylex\r\n    switch stylex\r\n      when 'left'\r\n        text.position.x = x\r\n      when 'center'\r\n        text.position.x = x - text.width / 2\r\n      when 'right'\r\n        text.position.x = x - text.width\r\n    switch styley\r\n      when 'top'\r\n        text.position.y = y\r\n      when 'center'\r\n        text.position.y = y - text.height / 2\r\n      when 'bottom'\r\n        text.position.y = y - text.height\r\n    return text\r\n\r\n  setupStartView: ->\r\n    g = new PIXI.Graphics\r\n    g.lineStyle 0\r\n      .beginFill 0x333333\r\n      .drawRect 0, 0, @viewsize, @viewsize\r\n      .endFill()\r\n    g.alpha = 0.7\r\n\r\n    text = @setupText @viewsize / 2, @viewsize / 2, 'PRESS Z', '24px Papyrus', 0xffffff, 'center', 'center'\r\n    g.addChild text\r\n\r\n    col = (util.rand(256) << 16) + (util.rand(256) << 8) + (util.rand(256))\r\n    text2 = @setupText @viewsize / 2, @viewsize / 4, 'harmony', '56px Papyrus', col, 'center', 'center'\r\n    filter = new PIXI.filters.BlurFilter\r\n    filter.blur = 32\r\n    text2.filters = [filter]\r\n    g.addChild text2\r\n\r\n    text3 = @setupText @viewsize / 2, @viewsize / 4, 'harmony', '56px Papyrus', 0xffffff, 'center', 'center'\r\n    g.addChild text3\r\n\r\n    text4 = @setupText @viewsize, @viewsize, \"version: #{meta.version}\", '16px Papyrus', 0xffffff, 'right', 'bottom'\r\n    g.addChild text4\r\n\r\n    return g\r\n\r\n  setupPauseView: ->\r\n    g = new PIXI.Graphics\r\n    g.lineStyle 0\r\n      .beginFill 0x333333\r\n      .drawRect 0, 0, @viewsize, @viewsize\r\n      .endFill()\r\n    g.alpha = 0.7\r\n\r\n    text = @setupText @viewsize / 2, @viewsize / 2, 'Pause', '24px Papyrus', 0xffffff, 'center', 'center'\r\n    g.addChild text\r\n\r\n    return g\r\n\r\n  setupResultView: (isWin)->\r\n    filter = new PIXI.filters.BlurFilter\r\n    filter.blur = 24\r\n\r\n    g = new PIXI.Graphics\r\n    g.lineStyle 0\r\n      .beginFill 0x333333\r\n      .drawRect 0, 0, @viewsize, @viewsize\r\n      .endFill()\r\n    g.alpha = 0.7\r\n    col = if isWin then 0xffff00 else 0x00ffff\r\n    str = if isWin then 'You Win' else 'You Lose'\r\n    text = @setupText @viewsize / 2, @viewsize / 2, str, '36px Papyrus', col, 'center', 'center'\r\n    g.addChild text\r\n\r\n    text3 = @setupText @viewsize / 2, @viewsize / 2, str, '36px Papyrus', col, 'center', 'center'\r\n    text3.filters = [filter]\r\n    g.addChild text3\r\n\r\n    text2 = @setupText @viewsize / 2, @viewsize * 3 / 4, 'PRESS ESC or Reload', '16px Papyrus', 0xffffff, 'center', 'bottom'\r\n    g.addChild text2\r\n    \r\n    return g\r\n\r\n  setupField: ->\r\n    g = new PIXI.Graphics\r\n    g2 = new PIXI.Graphics\r\n    filter = new PIXI.filters.BlurFilter\r\n    filter.blur = 7\r\n\r\n    draw = (type, width, color)=>\r\n      \r\n      for v, i in @dismap\r\n        x = i % @size\r\n        y = i / @size | 0\r\n        continue if x > @size - 2\r\n        break if y > @size - 2 \r\n        d = [@dismap[i], @dismap[i + 1], @dismap[i + @size], @dismap[i + @size + 1]]\r\n        f = [@field[i], @field[i + 1], @field[i + @size], @field[i + @size + 1]]\r\n      \r\n        continue unless f.some((v)-> v is type)\r\n      \r\n        p = []\r\n        p.push {x: x + 0.5, y: y} if d[0] * d[1] < 0\r\n        p.push {x: x, y: y + 0.5} if d[0] * d[2] < 0\r\n        p.push {x: x + 1.0, y: y + 0.5} if d[1] * d[3] < 0\r\n        p.push {x: x + 0.5, y: y + 1.0} if d[2] * d[3] < 0\r\n        continue unless p.length is 2\r\n        \r\n        g.lineStyle width, color\r\n          .moveTo (p[0].x + 0.5) * @gridSize, (p[0].y + 0.5) * @gridSize\r\n          .lineTo (p[1].x + 0.5) * @gridSize, (p[1].y + 0.5) * @gridSize\r\n\r\n        g2.lineStyle width * 2, color\r\n          .moveTo (p[0].x + 0.5) * @gridSize, (p[0].y + 0.5) * @gridSize\r\n          .lineTo (p[1].x + 0.5) * @gridSize, (p[1].y + 0.5) * @gridSize\r\n\r\n    draw 1, 2, 0x00ff7f\r\n    draw 2, 2, 0xff7f00\r\n    draw 3, 2, 0xff3000\r\n    draw 4, 2, 0x00a0ff\r\n    draw 5, 2, 0x0050ff\r\n\r\n    filter2 = new PIXI.filters.BlurFilter\r\n    filter2.blur = 32\r\n\r\n    for t in @team\r\n      str = \"#{t.point}\"\r\n      col = 0xffffff\r\n      x = (t.base.x + 0.5) * @gridSize\r\n      y = (t.base.y + 0.5) * @gridSize\r\n      t.scoreborad = @setupText x, y, str, '36px Papyrus', col, 'center', 'center'\r\n      t.scoreborad2 = @setupText x, y, str, '36px Papyrus', t.color, 'center', 'center'\r\n      t.scoreborad2.filters = [filter2]\r\n      t.scoreborad.alpha = 0.7\r\n      \r\n      t.scoreboradUpdate = do =>\r\n        gs = @gridSize\r\n        ->\r\n          x = (@base.x + 0.5) * gs\r\n          y = (@base.y + 0.5) * gs\r\n          @scoreborad.text = \"#{@point}\" \r\n          @scoreborad2.text = @scoreborad.text\r\n          @scoreborad.position.x = x - @scoreborad.width / 2\r\n          @scoreborad.position.y = y - @scoreborad.height / 2\r\n          @scoreborad2.position  = @scoreborad.position\r\n      \r\n      g.addChild t.scoreborad2\r\n      g.addChild t.scoreborad\r\n\r\n    g.blendMode = PIXI.BLEND_MODES.ADD\r\n    g.alpha = 0.7\r\n    #g2.alpha = 0.5\r\n    g2.filters = [filter]\r\n\r\n    g.addChild g2\r\n\r\n    ###\r\n    for t, ti in @team\r\n      continue unless ti is 1\r\n      for d, i in t.enemydismap #t.coredirmap\r\n        continue unless d > 0\r\n        x = i % @sizer\r\n        y = (i / @sizer) | 0\r\n        tx = (x + 0.5) * @gridSizer\r\n        ty = (y + 0.5) * @gridSizer\r\n        text = @setupText tx, ty, \"#{d}\", '8px', 0xffffff, 'center', 'center'\r\n        g.addChild text\r\n    ###\r\n\r\n    return g\r\n\r\n  setupBullet: (b)->\r\n    g = new PIXI.Graphics\r\n    \r\n    p0x = b.pos.x * @gridSize\r\n    p0y = b.pos.y * @gridSize\r\n    size = b.size * @gridSize\r\n\r\n    g.lineStyle 1, @team[b.team].color\r\n      .drawCircle 0, 0, size\r\n\r\n    g.position.x = p0x\r\n    g.position.y = p0y \r\n\r\n    return g\r\n\r\n  setupUnit: (unit)->\r\n    g = new PIXI.Graphics\r\n    \r\n    p0x = unit.pos.x * @gridSize\r\n    p0y = unit.pos.y * @gridSize\r\n    size = unit.size * @gridSize\r\n\r\n    p1x = size\r\n    p1y = 0\r\n\r\n    rad = -150 * Math.PI / 180\r\n    p2x = size * Math.cos rad\r\n    p2y = size * Math.sin rad\r\n\r\n    rad = 150 * Math.PI / 180\r\n    p3x = size * Math.cos rad\r\n    p3y = size * Math.sin rad\r\n    \r\n    g.lineStyle 2, @team[unit.team].color\r\n      .moveTo p1x, p1y\r\n      .lineTo p2x, p2y\r\n      .lineTo 0, 0\r\n      .lineTo p3x, p3y\r\n      .lineTo p1x, p1y\r\n\r\n    unit.scoreborad = @setupText p0x + size * 1.4, p0y - size * 1.4, \"#{unit.hp}\", '14px Papyrus', 0xffffff, 'center', 'center'\r\n    unit.scoreboradUpdate = do =>\r\n      gs = @gridSize\r\n      ->\r\n        p0x = @pos.x * gs\r\n        p0y = @pos.y * gs\r\n        size = @size * gs\r\n        @scoreborad.text = \"#{@hp}\"\r\n        @scoreborad.position.x = p0x + size * 1.4\r\n        @scoreborad.position.y = p0y - size * 1.4\r\n\r\n    @container.addChild unit.scoreborad\r\n    g.position.x = p0x\r\n    g.position.y = p0y \r\n    g.rotation = unit.ang * Math.PI / 180\r\n\r\n    return g\r\n\r\n  getNear: (pos, team, limit)->\r\n    ang = undefined\r\n    for u in team.units\r\n      {x, y} = u.i.pos\r\n      r2 = Math.pow(pos.x - x, 2) + Math.pow(pos.y - y, 2) \r\n      if r2 < limit * limit\r\n        rad = Math.atan2 y - pos.y, x - pos.x\r\n        ang = rad * 180 / Math.PI\r\n    ang\r\n\r\n  updateUnits: ->\r\n    for t, ti in @team\r\n      unless util.rand 8\r\n        @setEnemydismap t, @team[1 - ti].units\r\n      for u in t.units\r\n        u.i.update (v)=>\r\n          @addBullet v\r\n        , (pos, limit)=>\r\n          @getNear pos, @team[1 - ti], limit\r\n\r\n        @fix u.i\r\n\r\n        for t in @team\r\n          continue if u.i.team is t.id \r\n          p1 = u.i.pos\r\n          r1 = u.i.size * 3 / 4\r\n          for b in t.bullets\r\n            p2 = b.i.pos\r\n            r2 = b.i.size\r\n            if Math.pow(p1.x - p2.x, 2) + Math.pow(p1.y - p2.y, 2) < Math.pow(r1 + r2, 2)\r\n              b.i.removeflag = true\r\n              u.i.hp--\r\n              u.i.scoreboradUpdate()\r\n\r\n        u.g.position.x = u.i.pos.x * @gridSize\r\n        u.g.position.y = u.i.pos.y * @gridSize\r\n        u.g.rotation = u.i.shotang * Math.PI / 180\r\n\r\n  updateBullets: ->\r\n    for t in @team\r\n      removeList = []\r\n      for b, i in t.bullets\r\n        b.i.update()\r\n        poss = b.i.getCollider()\r\n        for p in poss\r\n          {d, f} = @hitCheck p.x, p.y\r\n          if d < 0\r\n            b.i.removeflag = true\r\n            for type in f\r\n              switch type\r\n                when 2\r\n                  break if b.i.team is 0\r\n                  @team[0].changePoint -1\r\n                when 4\r\n                  break if b.i.team is 1\r\n                  @team[1].changePoint -1\r\n\r\n        b.g.position.x = b.i.pos.x * @gridSize\r\n        b.g.position.y = b.i.pos.y * @gridSize\r\n        b.g.rotation = b.i.rad\r\n\r\n        if b.i.removeflag\r\n          removeList.push i\r\n          @container.removeChild b.g \r\n\r\n      _.remove t.bullets, (v, k)-> removeList.some((u)-> u is k)\r\n\r\n\r\n  update: ->\r\n    location.reload() if @input.keys['esc']\r\n    @phase()\r\n\r\nmodule.exports = World\r\n","module.exports = \r\n  IDOL: 0\r\n  MOVE:\r\n    TOP:    1\r\n    BOTTOM: 2\r\n    LEFT:   3\r\n    RIGHT:  4\r\n  ATTACK:\r\n    AIM:    5\r\n    FOWARD: 6","class Brain\r\n  constructor: ()->\r\n\r\n\r\n  update: (unit)->\r\n\r\n\r\nmodule.exports = Brain\r\n","util = require '../util'\r\nBrain = require '../brain'\r\nACTION = require '../actions'\r\n\r\nclass AttackerBrain extends Brain\r\n  constructor: (@team)->\r\n    super()\r\n    @prevacts = []\r\n\r\n  update: (unit, near)->\r\n    super unit\r\n\r\n    if util.rand 8\r\n      return @prevacts\r\n\r\n    acts = [] \r\n\r\n    dir = []\r\n    for k in [-1, 0, 1]\r\n      for i in [-1, 0, 1]\r\n        continue if i is 0 and k is 0\r\n        dir.push [i, k]\r\n\r\n    {x, y} = unit.pos\r\n    mx = Math.ceil((x - 0.5) * @team.mapresolution)\r\n    my = Math.ceil((y - 0.5) * @team.mapresolution)\r\n    cd = @team.coredismap[mx + my * @team.mapsize * @team.mapresolution]\r\n    cdr = @team.coredirmap[mx + my * @team.mapsize * @team.mapresolution]\r\n    \r\n    if cdr > 0\r\n      angs = [0, 180, 90, 270]\r\n      ang = (unit.ang + 360) % 360\r\n      if ang is angs[cdr - 1]\r\n        if util.rand(5) and near unit.pos, 5\r\n          acts.push ACTION.ATTACK.AIM\r\n        else \r\n          acts.push ACTION.ATTACK.FOWARD\r\n      else\r\n        switch cdr\r\n          when 1 then acts.push ACTION.MOVE.RIGHT\r\n          when 2 then acts.push ACTION.MOVE.LEFT\r\n          when 3 then acts.push ACTION.MOVE.BOTTOM\r\n          when 4 then acts.push ACTION.MOVE.TOP\r\n      \r\n    else if util.rand 8\r\n      mind = cd\r\n      cand = []\r\n      for d in dir\r\n        index = (mx + d[0]) + (my + d[1]) * @team.mapsize * @team.mapresolution\r\n        index2 = (mx + d[0] * 2) + (my + d[1] * 2) * @team.mapsize * @team.mapresolution\r\n        dis = @team.coredismap[index]\r\n        dis2 = @team.coredismap[index2]\r\n        continue if dis < 0\r\n        continue if util.rand(2) and dis2 < 0\r\n        if dis is mind\r\n          cand.push d\r\n        else if dis < mind and dis > 2\r\n          cand = [d]\r\n          mind = dis\r\n  \r\n      if 0 < cand.length < 5\r\n        d = util.randArray cand\r\n        switch d[0]\r\n          when -1 then acts.push ACTION.MOVE.LEFT\r\n          when 1 then acts.push ACTION.MOVE.RIGHT\r\n        switch d[1]\r\n          when -1 then acts.push ACTION.MOVE.TOP\r\n          when 1 then acts.push ACTION.MOVE.BOTTOM\r\n      else\r\n        acts.push util.randArray([\r\n          ACTION.MOVE.TOP, \r\n          ACTION.MOVE.BOTTOM, \r\n          ACTION.MOVE.LEFT, \r\n          ACTION.MOVE.RIGHT\r\n        ])\r\n        acts.push ACTION.ATTACK.AIM\r\n    else\r\n      acts.push util.randArray([\r\n        ACTION.MOVE.TOP, \r\n        ACTION.MOVE.BOTTOM, \r\n        ACTION.MOVE.LEFT, \r\n        ACTION.MOVE.RIGHT\r\n      ])\r\n      acts.push ACTION.ATTACK.AIM\r\n\r\n    @prevacts = acts\r\n\r\n    return acts\r\n\r\nmodule.exports = AttackerBrain","util = require '../util'\r\nBrain = require '../brain'\r\nACTION = require '../actions'\r\n\r\nclass DefenderBrain extends Brain\r\n  constructor: (@team)->\r\n    super()\r\n    @prevacts = []\r\n\r\n  update: (unit, near)->\r\n    super unit\r\n\r\n    if util.rand 8\r\n      return @prevacts\r\n\r\n    acts = [] \r\n\r\n    dir = []\r\n    for k in [-1, 0, 1]\r\n      for i in [-1, 0, 1]\r\n        continue if i is 0 and k is 0\r\n        dir.push [i, k]\r\n\r\n    {x, y} = unit.pos\r\n    mx = Math.ceil((x - 0.5) * @team.mapresolution)\r\n    my = Math.ceil((y - 0.5) * @team.mapresolution)\r\n    ed = @team.enemydismap[mx + my * @team.mapsize * @team.mapresolution]\r\n    cdr = @team.coredirmap[mx + my * @team.mapsize * @team.mapresolution]\r\n    \r\n    if cdr > 0 #and util.rand 32\r\n      angs = [0, 180, 90, 270]\r\n      ang = (unit.ang + 360) % 360\r\n      if ang is angs[cdr - 1]\r\n        if util.rand(5) and near unit.pos\r\n          acts.push ACTION.ATTACK.AIM\r\n        else \r\n          acts.push ACTION.ATTACK.FOWARD\r\n      else\r\n        switch cdr\r\n          when 1 then acts.push ACTION.MOVE.RIGHT\r\n          when 2 then acts.push ACTION.MOVE.LEFT\r\n          when 3 then acts.push ACTION.MOVE.BOTTOM\r\n          when 4 then acts.push ACTION.MOVE.TOP\r\n      \r\n    else if util.rand(8) and 0 < ed\r\n      mind = ed\r\n      cand = []\r\n      for d in dir\r\n        index = (mx + d[0]) + (my + d[1]) * @team.mapsize * @team.mapresolution\r\n        index2 = (mx + d[0] * 2) + (my + d[1] * 2) * @team.mapsize * @team.mapresolution\r\n        dis = @team.enemydismap[index]\r\n        dis2 = @team.enemydismap[index2]\r\n        continue if dis < 0\r\n        continue if util.rand(2) and dis2 < 0\r\n        if dis is mind\r\n          cand.push d\r\n        else if dis < mind and dis > 2\r\n          cand = [d]\r\n          mind = dis\r\n  \r\n      if 0 < cand.length < 5\r\n        if ed < 6\r\n          acts.push ACTION.ATTACK.AIM\r\n        else \r\n          acts.push ACTION.ATTACK.FOWARD\r\n        d = util.randArray cand\r\n        switch d[0]\r\n          when -1 then acts.push ACTION.MOVE.LEFT\r\n          when 1 then acts.push ACTION.MOVE.RIGHT\r\n        switch d[1]\r\n          when -1 then acts.push ACTION.MOVE.TOP\r\n          when 1 then acts.push ACTION.MOVE.BOTTOM\r\n      else\r\n        acts.push util.randArray([\r\n          ACTION.MOVE.TOP, \r\n          ACTION.MOVE.BOTTOM, \r\n          ACTION.MOVE.LEFT, \r\n          ACTION.MOVE.RIGHT\r\n        ])\r\n        acts.push ACTION.ATTACK.AIM\r\n\r\n    else\r\n      acts.push util.randArray([\r\n        ACTION.MOVE.TOP, \r\n        ACTION.MOVE.BOTTOM, \r\n        ACTION.MOVE.LEFT, \r\n        ACTION.MOVE.RIGHT\r\n      ])\r\n      acts.push ACTION.ATTACK.AIM\r\n\r\n    @prevacts = acts\r\n\r\n    return acts\r\n\r\nmodule.exports = DefenderBrain","Brain = require '../brain'\r\nACTION = require '../actions'\r\n\r\nclass HumanBrain extends Brain\r\n  constructor: (@input)->\r\n    super()\r\n\r\n\r\n  update: (unit)->\r\n    super unit\r\n    acts = []  \r\n\r\n    if @input.keys['up']\r\n      acts.push ACTION.MOVE.TOP\r\n    if @input.keys['down']\r\n      acts.push ACTION.MOVE.BOTTOM\r\n    if @input.keys['right']\r\n      acts.push ACTION.MOVE.RIGHT\r\n    if @input.keys['left']\r\n      acts.push ACTION.MOVE.LEFT\r\n    if @input.keys['z']\r\n      acts.push ACTION.ATTACK.AIM\r\n      \r\n    \r\n    acts\r\n\r\nmodule.exports = HumanBrain","class Bullet\r\n  constructor: (@pos, @size, ang, @vel, @parent)->\r\n    @rad = ang * Math.PI / 180\r\n    @team = @parent.team\r\n    @r = 0\r\n    \r\n  getCollider: ->\r\n    rad45 = Math.PI * 45 / 180\r\n    colls = []\r\n    colls.push\r\n      x: @pos.x # + @size * Math.cos @rad\r\n      y: @pos.y # + @size * Math.sin @rad\r\n    colls.push\r\n      x: @pos.x + @size * Math.cos (@rad + rad45)\r\n      y: @pos.y + @size * Math.sin (@rad + rad45)\r\n    colls.push\r\n      x: @pos.x + @size * Math.cos (@rad - rad45)\r\n      y: @pos.y + @size * Math.sin (@rad - rad45)\r\n    colls\r\n\r\n  update: ->\r\n    @pos.x += @vel * Math.cos @rad\r\n    @pos.y += @vel * Math.sin @rad\r\n    @r += @vel\r\n\r\nmodule.exports = Bullet\r\n","class Input\r\n  constructor: (@domElement = document)->\r\n    @keys = {}\r\n    @listener = {}\r\n\r\n    @keyMap =\r\n      8: 'backspace'\r\n      13: 'enter'\r\n      16: 'shift'\r\n      17: 'ctrl'\r\n      18: 'alt'\r\n      27: 'esc'\r\n      32: 'space'\r\n      37: 'left'\r\n      38: 'up'\r\n      39: 'right'\r\n      40: 'down'\r\n\r\n    mapper = (keycode, status)=>\r\n      key: @keyMap[keycode] or String.fromCharCode(keycode).toLowerCase()\r\n      status: status\r\n\r\n    keydown = Bacon.fromEventTarget(@domElement, 'keydown').map (e)=> mapper.call @, e.keyCode, true\r\n    keyup = Bacon.fromEventTarget(@domElement, 'keyup').map (e)=> mapper.call @, e.keyCode, false\r\n    keydown.merge(keyup).filter (e)->\r\n      code = e.key.charCodeAt 0\r\n      47 < code < 58 or 96 < code < 123\r\n    .onValue (e)=>\r\n      @keys[e.key] = e.status\r\n      return unless e.status \r\n      @listener[e.key]?.forEach (v)-> do v\r\n\r\n    buttons = [1, 2]\r\n    \r\n    mouseEvent = (type)=>\r\n      listener = {}\r\n      buttons.forEach (e)-> listener[e] = []\r\n      Bacon.fromEventTarget @domElement, type\r\n        .filter (e)-> e.button in buttons\r\n        .onValue (e)-> listener[e.button].forEach (v)-> v e.clientX, e.clientY\r\n      [ \r\n        (btn, cb)-> listener[btn]?.push cb,\r\n        (btn, cb)-> _.remove listener[btn], (v)-> if cb? then v is cb else true\r\n      ]\r\n\r\n    [@onMouseDown, @offMouseDown] = mouseEvent 'mousedown'\r\n    [@onMouseUp, @offMouseUp] = mouseEvent 'mouseup'\r\n    [@onDoubleClick, @offDoubleClick] = _.transform mouseEvent('dblclick'), (res, e)-> res.push e.bind @, 1\r\n\r\n    [@onMouseMove, @offMouseMove] = do =>\r\n      listener = {}\r\n      active = {}\r\n      buttons.forEach (e)-> \r\n        active[e] = false\r\n        listener[e] = []\r\n      md = Bacon.fromEventTarget(@domElement, 'mousedown').map (e)-> [e.button, true]\r\n      mu = Bacon.fromEventTarget(@domElement, 'mouseup').map (e)-> [e.button, false]\r\n      md.merge(mu).onValue (e)-> active[e[0]] = e[1] if active[e[0]]?\r\n      Bacon.fromEventTarget(@domElement, 'mousemove').onValue (e)->\r\n        for own k, v of listener\r\n          v.forEach (u)-> u e.clientX, e.clientY if active[k] \r\n      [\r\n        (btn, cb)-> listener[btn]?.push cb,\r\n        (btn, cb)-> _.remove listener[btn], (v)-> if cb? then v is cb else true\r\n      ]\r\n\r\n    @offAll = =>\r\n      buttons.forEach (v)=>\r\n        @offMouseDown v\r\n        @offMouseUp v\r\n        @offMouseMove v\r\n      @offDoubleClick()\r\n      @listener = {}\r\n        \r\n\r\n  on: (key, cb)->\r\n    return @listener[key].push cb if @listener[key]\r\n    @listener[key] = [cb]\r\n\r\n  off: (key, cb)->\r\n    _.remove @listener[key], (v)-> v is cb\r\n\r\n\r\nmodule.exports = Input","'use strict'\r\n\r\nView = require './view'\r\nWorld = require './World'\r\n\r\nclass Main \r\n  constructor: ->\r\n    @view = new View\r\n    @world = new World @view.container, @view.size\r\n    \r\n  loop: ->\r\n    requestAnimationFrame => @loop()\r\n    @view.render => @world.update()\r\n\r\n$ -> do new Main().loop\r\n","module.exports = \r\n  INIT: 0\r\n  READY: 1\r\n  ACTIVE: 2\r\n  DEAD: 3","\r\nclass Team\r\n  constructor: (@id, @base, @core, @color, @point = 100)->\r\n    @units = []\r\n    @bullets = []\r\n\r\n  changePoint: (diff)->\r\n    @point += diff\r\n    @point = Math.max 0, @point\r\n    @scoreboradUpdate()\r\n\r\n  eachMembers: (f)->\r\n    f u for u in @units\r\n\r\nmodule.exports = Team","ACTION = require './actions'\r\nSTATUS = require './status'\r\nutil = require './util'\r\n\r\nclass Unit \r\n  constructor: (@team, @base, @brain)->\r\n    @pos = {x: 0, y: 0}\r\n    @ang = if @team % 2 then 180 else 0\r\n    @shotang = 0.0\r\n    @fullhp = 5\r\n    @hp = @fullhp\r\n    @size = 0.2\r\n    @vel = 0.0\r\n    @shotInterval = 0\r\n    @status = STATUS.ACTIVE\r\n    @respawnCount = 0\r\n\r\n  getCollider: ->\r\n    colls = []\r\n    rad = @ang * Math.PI / 180\r\n    colls.push\r\n      x: @pos.x + @size * Math.cos rad\r\n      y: @pos.y + @size * Math.sin rad\r\n    ###\r\n    rad = (@ang - 150) * Math.PI / 180\r\n    colls.push\r\n      x: @pos.x + @size * Math.cos rad\r\n      y: @pos.y + @size * Math.sin rad\r\n    rad = (@ang + 150) * Math.PI / 180\r\n    colls.push\r\n      x: @pos.x + @size * Math.cos rad\r\n      y: @pos.y + @size * Math.sin rad\r\n    ###\r\n    colls\r\n\r\n  action: (actions, shot, near)->\r\n    moveflag = 0\r\n    aimflag = false\r\n    shotflag = false\r\n    angs = [undefined, -90, 90, undefined, 180, -135, 135, 180, 0, -45, 45, 0, undefined, -90, 90, undefined]\r\n    for act in actions\r\n      switch act\r\n        when ACTION.MOVE.TOP\r\n          moveflag += 1\r\n        when ACTION.MOVE.BOTTOM\r\n          moveflag += 2\r\n        when ACTION.MOVE.LEFT\r\n          moveflag += 4\r\n        when ACTION.MOVE.RIGHT\r\n          moveflag += 8  \r\n        when ACTION.ATTACK.AIM\r\n          aimflag = true\r\n          shotflag = true\r\n        when ACTION.ATTACK.FOWARD\r\n          shotflag = true\r\n    if angs[moveflag]?\r\n      @ang = angs[moveflag]\r\n      @vel = if aimflag then 0.03 else 0.06\r\n    else\r\n      @vel = 0\r\n\r\n    @shotang = @ang \r\n    @shotInterval-- if @shotInterval > 0\r\n\r\n    if shotflag and @shotInterval is 0\r\n      if aimflag\r\n        a = near @pos, 5\r\n        @shotang = a if a\r\n      @shotInterval = 20\r\n      shot @\r\n\r\n  update: (shot, near)->\r\n    switch @status\r\n      when STATUS.READY\r\n        if @respawnCount is 0\r\n          @status = STATUS.ACTIVE\r\n          @pos.x = @base.x + util.randf 1\r\n          @pos.y = @base.y + util.randf 1\r\n          @hp = @fullhp\r\n          @ang = if @team % 2 then 180 else 0\r\n        else\r\n          @respawnCount--\r\n      when STATUS.ACTIVE\r\n        @action @brain.update(@, near), shot, near\r\n\r\n        rad = @ang * Math.PI / 180\r\n        @pos.x += @vel * Math.cos rad\r\n        @pos.y += @vel * Math.sin rad\r\n        @vel = @vel * 0.7\r\n        @vel = 0.0 if @vel * @vel < 0.0001\r\n\r\n       \r\n\r\n        if @hp <= 0\r\n          @status = STATUS.DEAD\r\n\r\n      when STATUS.DEAD\r\n        @pos.x = -100\r\n        @pos.y = -100\r\n        @status = STATUS.READY\r\n        @respawnCount = 180\r\n\r\n     @scoreboradUpdate()\r\n\r\n\r\nmodule.exports = Unit\r\n","class Utility\r\n  @rand = (n)->\r\n    Math.floor Math.random() * n\r\n\r\n  @randf = (n)->\r\n    Math.random() * n\r\n\r\n  @randRange = (min, max)->\r\n    Math.floor(Math.random() * (max - min + 1)) + min\r\n  \r\n  @randArray = (arr)->\r\n    arr[Math.floor Math.random() * arr.length]\r\n\r\n\r\nmodule.exports = Utility","class View\r\n  constructor: ->\r\n\r\n    @size = 640\r\n    \r\n    @renderer = PIXI.autoDetectRenderer @size, @size,\r\n        backgroundColor: 0x000000\r\n        antialias: true\r\n        #transparent: true\r\n    $(document.body).append @renderer.view\r\n\r\n    @container = new PIXI.Container\r\n\r\n    @stats = new Stats\r\n    @stats.setMode 0  # 0: fps, 1: ms, 2: mb\r\n    @stats.domElement.style.position = 'absolute'\r\n    @stats.domElement.style.right = '0px'\r\n    @stats.domElement.style.top = '0px'\r\n    $(document.body).append @stats.domElement\r\n\r\n  render: (updater)->\r\n    @stats.begin()\r\n    updater()\r\n    @renderer.render @container\r\n    @stats.end()\r\n\r\n\r\nmodule.exports = View\r\n"],"sourceRoot":"./src"}