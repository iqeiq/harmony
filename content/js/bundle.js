!function t(e,i,n){function r(o,u){if(!i[o]){if(!e[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(s)return s(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var c=i[o]={exports:{}};e[o][0].call(c.exports,function(t){var i=e[o][1][t];return r(i?i:t)},c,c.exports,t,e,i,n)}return i[o].exports}for(var s="function"==typeof require&&require,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(t,e,i){(function(t){function e(t,e){for(var i=0,n=t.length-1;n>=0;n--){var r=t[n];"."===r?t.splice(n,1):".."===r?(t.splice(n,1),i++):i&&(t.splice(n,1),i--)}if(e)for(;i--;i)t.unshift("..");return t}function n(t,e){if(t.filter)return t.filter(e);for(var i=[],n=0;n<t.length;n++)e(t[n],n,t)&&i.push(t[n]);return i}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,s=function(t){return r.exec(t).slice(1)};i.resolve=function(){for(var i="",r=!1,s=arguments.length-1;s>=-1&&!r;s--){var o=s>=0?arguments[s]:t.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(i=o+"/"+i,r="/"===o.charAt(0))}return i=e(n(i.split("/"),function(t){return!!t}),!r).join("/"),(r?"/":"")+i||"."},i.normalize=function(t){var r=i.isAbsolute(t),s="/"===o(t,-1);return t=e(n(t.split("/"),function(t){return!!t}),!r).join("/"),t||r||(t="."),t&&s&&(t+="/"),(r?"/":"")+t},i.isAbsolute=function(t){return"/"===t.charAt(0)},i.join=function(){var t=Array.prototype.slice.call(arguments,0);return i.normalize(n(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},i.relative=function(t,e){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var i=t.length-1;i>=0&&""===t[i];i--);return e>i?[]:t.slice(e,i-e+1)}t=i.resolve(t).substr(1),e=i.resolve(e).substr(1);for(var r=n(t.split("/")),s=n(e.split("/")),o=Math.min(r.length,s.length),u=o,a=0;o>a;a++)if(r[a]!==s[a]){u=a;break}for(var h=[],a=u;a<r.length;a++)h.push("..");return h=h.concat(s.slice(u)),h.join("/")},i.sep="/",i.delimiter=":",i.dirname=function(t){var e=s(t),i=e[0],n=e[1];return i||n?(n&&(n=n.substr(0,n.length-1)),i+n):"."},i.basename=function(t,e){var i=s(t)[2];return e&&i.substr(-1*e.length)===e&&(i=i.substr(0,i.length-e.length)),i},i.extname=function(t){return s(t)[3]};var o="b"==="ab".substr(-1)?function(t,e,i){return t.substr(e,i)}:function(t,e,i){return 0>e&&(e=t.length+e),t.substr(e,i)}}).call(this,t("_process"))},{_process:2}],2:[function(t,e,i){function n(){c=!1,u.length?h=u.concat(h):p=-1,h.length&&r()}function r(){if(!c){var t=setTimeout(n);c=!0;for(var e=h.length;e;){for(u=h,h=[];++p<e;)u&&u[p].run();p=-1,e=h.length}u=null,c=!1,clearTimeout(t)}}function s(t,e){this.fun=t,this.array=e}function o(){}var u,a=e.exports={},h=[],c=!1,p=-1;a.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];h.push(new s(t,e)),1!==h.length||c||setTimeout(r,0)},s.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=o,a.addListener=o,a.once=o,a.off=o,a.removeListener=o,a.removeAllListeners=o,a.emit=o,a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],3:[function(t,e,i){var n,r,s,o,u,a,h,c,p;c=t("path"),p=t("./util"),s=t("./input"),a=t("./unit"),u=t("./team"),n=t("./bullet"),r=t("./brain/human"),o=t("./brain/standard"),h=function(){function t(t,e,i){var n,h,c,p,l,f,d,v,y,m,g,b,w,x,z,M,T,I,E,C,k,P,A,S,O,_,V;for(this.container=t,this.viewsize=e,this.size=null!=i?i:32,this.input=new s,this.size2=this.size*this.size,this.gridSize=this.viewsize/this.size,this.field=new Uint8Array(this.size2),this.dismap=new Int32Array(this.size2),this.plInfmap=new Float32Array(this.size2),this.enInfmap=new Float32Array(this.size2),I=1,this.team=[],h=[{},{}],c=[{},{}],z="11111111111111111111111111111111\r\n10000000000000001000000000000001\r\n10303000000000001000000000001101\r\n10060000000100000000000010000101\r\n10303000000100000000000010000001\r\n10000000000000001000000110000001\r\n10000000000000001000111111000001\r\n10000003303300000000001111110001\r\n10000003000300001000000110000001\r\n10000000020000001000000100000001\r\n10000003000300001000000100000001\r\n10000003303300001011000000111111\r\n10000000000000001011100000000001\r\n10000000000000011011100000000001\r\n10000000000000011000000000000001\r\n10111110111111111110000000000001\r\n10000000000001111111111101111101\r\n10000000000000011000000000000001\r\n10000000000111011000000000000001\r\n10000000000111010000000000000001\r\n11111100000011010000550550000001\r\n10000000100000010000500050000001\r\n10000000100000010000004000000001\r\n10000001100000010000500050000001\r\n10001111110000000000550550000001\r\n10000011111100010000000000000001\r\n10000001100000010000000000000001\r\n10000001000000000000100000050501\r\n10100001000000000000100000007001\r\n10110000000000010000000000050501\r\n10000000000000010000000000000001\r\n11111111111111111111111111111111",z=z.replace(/\r*\n/g,""),E=this.field,d=v=0,g=E.length;g>v;d=++v)switch(O=E[d],this.field[d]=parseInt(z.charAt(d)),_=d%this.size,V=d/this.size|0,this.field[d]){case 6:h[0]={x:_,y:V};break;case 7:h[1]={x:_,y:V};break;case 2:c[0]={x:_,y:V};break;case 4:c[1]={x:_,y:V}}for(this.team.push(new u(0,h[0],c[0],16752640)),this.team.push(new u(1,h[1],c[1],65535)),C=this.dismap,d=m=0,b=C.length;b>m;d=++m)O=C[d],this.dismap[d]=[0,6,7,8].some(function(t){return function(e){return t.field[d]===e}}(this))?1:-1;for(this.gField=this.setupField(),this.container.addChild(this.gField),f=new r(this.input),this.player=new a(I,this.team[I].base,f),this.addUnit(this.player),k=this.team,d=x=0,w=k.length;w>x;d=++x)for(A=k[d],M=I===d?3:4,y=T=0,P=M;P>=0?P>T:T>P;y=P>=0?++T:--T)n=new o,S=new a(d,A.base,n),this.addUnit(S);l=this.setupStartView(),this.container.addChild(l),p=this.setupPauseView(),this.scene={},this.scene.init=function(t){return function(){return function(e){return t.input.keys.z?(t.container.removeChild(l),e("main")):void 0}}}(this),this.scene.main=function(t){return function(){var e;return e=!1,t.input.on("space",function(){return e=!e,e?t.container.addChild(p):t.container.removeChild(p)}),function(i){var n,r,s,o,u;if(!e){for(t.updateUnits(),t.updateBullets(),t.input.keys.o&&t.team[0].changePoint(-100),t.input.keys.p&&t.team[1].changePoint(-100),u=void 0,o=t.team,d=s=0,r=o.length;r>s;d=++s)if(A=o[d],0===A.point){u=d===I?!1:!0;break}return void 0!==u?(t.input.offAll(),n=t.setupResultView(u),t.container.addChild(n),i("result")):void 0}}}}(this),this.scene.result=function(t){return function(){return function(t){}}}(this),this.phase=null,this.transit=function(t){return function(e){return t.phase=t.scene[e]().bind(t,t.transit)}}(this),this.transit("init")}return t.prototype.addUnit=function(t){var e,i,n,r,s;return n=t.team,i=this.team[n].base,r=i.x,s=i.y,t.pos.x=r+p.randf(1),t.pos.y=s+p.randf(1),t.ang=n%2?180:0,e=this.setupUnit(t),this.container.addChild(e),this.team[n].units.push({i:t,g:e})},t.prototype.addBullet=function(t){var e,i,r;return r=t.team,e=new n({x:t.pos.x,y:t.pos.y},.1,t.shotang,.1,t),i=this.setupBullet(e),this.container.addChild(i),this.team[r].bullets.push({i:e,g:i})},t.prototype.hitCheck=function(t,e){var i,n,r,s,o,u;return.5>t||.5>e?-2:t>this.size-.5||e>this.size-.5?-2:(r=Math.floor(t-.5)+this.size*Math.floor(e-.5),o=t-.5-Math.floor(t-.5),u=e-.5-Math.floor(e-.5),1e-4>o&&(o=0),1e-4>u&&(u=0),i=[this.dismap[r],this.dismap[r+1],this.dismap[r+this.size],this.dismap[r+this.size+1]],n=[this.field[r],this.field[r+1],this.field[r+this.size],this.field[r+this.size+1]],s=(1-o)*(1-u)*i[0]+(1-o)*u*i[2]+o*(1-u)*i[1]+o*u*i[3],_.remove(n,function(t){return 0===t}),{d:s,f:_.uniq(n)})},t.prototype.fix=function(t){var e,i,n,r,s,o,u,a,h;for(o=t.getCollider(),h=[],n=0,r=o.length;r>n;n++)s=o[n],a=this.hitCheck(s.x,s.y),e=a.d,i=a.f,0>e?(u=(t.ang+180)*Math.PI/180,t.pos.x-=e*Math.cos(u),t.pos.y-=e*Math.sin(u),h.push(t.vel=0)):h.push(void 0);return h},t.prototype.setupText=function(t,e,i,n,r,s,o){var u;switch(u=new PIXI.Text(i,{font:n,fill:r,align:s}),s){case"left":u.position.x=t;break;case"center":u.position.x=t-u.width/2;break;case"right":u.position.x=t-u.width}switch(o){case"top":u.position.y=e;break;case"center":u.position.y=e-u.height/2;break;case"bottom":u.position.y=e-u.height}return u},t.prototype.setupStartView=function(){var t,e,i,n,r,s;return i=new PIXI.Graphics,i.lineStyle(0).beginFill(3355443).drawRect(0,0,this.viewsize,this.viewsize).endFill(),i.alpha=.7,n=this.setupText(this.viewsize/2,this.viewsize/2,"PRESS Z","24px Papyrus",16777215,"center","center"),i.addChild(n),t=(p.rand(256)<<16)+(p.rand(256)<<8)+p.rand(256),r=this.setupText(this.viewsize/2,this.viewsize/4,"harmony","56px Papyrus",t,"center","center"),e=new PIXI.filters.BlurFilter,e.blur=32,r.filters=[e],i.addChild(r),s=this.setupText(this.viewsize/2,this.viewsize/4,"harmony","56px Papyrus",16777215,"center","center"),i.addChild(s),i},t.prototype.setupPauseView=function(){var t,e;return t=new PIXI.Graphics,t.lineStyle(0).beginFill(3355443).drawRect(0,0,this.viewsize,this.viewsize).endFill(),t.alpha=.7,e=this.setupText(this.viewsize/2,this.viewsize/2,"Pause","24px Papyrus",16777215,"center","center"),t.addChild(e),t},t.prototype.setupResultView=function(t){var e,i,n,r,s,o,u;return i=new PIXI.filters.BlurFilter,i.blur=24,n=new PIXI.Graphics,n.lineStyle(0).beginFill(3355443).drawRect(0,0,this.viewsize,this.viewsize).endFill(),n.alpha=.7,e=t?16776960:65535,r=t?"You Win":"You Lose",s=this.setupText(this.viewsize/2,this.viewsize/2,r,"36px Papyrus",e,"center","center"),n.addChild(s),u=this.setupText(this.viewsize/2,this.viewsize/2,r,"36px Papyrus",e,"center","center"),u.filters=[i],n.addChild(u),o=this.setupText(this.viewsize/2,3*this.viewsize/4,"PRESS ESC or Reload","16px Papyrus",16777215,"center","bottom"),n.addChild(o),n},t.prototype.setupField=function(){var t,e,i,n,r,s,o,u,a,h,c,p,l;for(r=new PIXI.Graphics,s=new PIXI.Graphics,i=new PIXI.filters.BlurFilter,i.blur=7,e=function(t){return function(e,i,n){var o,u,a,h,c,p,l,f,d,v,y;for(l=t.dismap,f=[],a=h=0,c=l.length;c>h;a=++h)if(d=l[a],v=a%t.size,y=a/t.size|0,!(v>t.size-2)){if(y>t.size-2)break;o=[t.dismap[a],t.dismap[a+1],t.dismap[a+t.size],t.dismap[a+t.size+1]],u=[t.field[a],t.field[a+1],t.field[a+t.size],t.field[a+t.size+1]],u.some(function(t){return t===e})&&(p=[],o[0]*o[1]<0&&p.push({x:v+.5,y:y}),o[0]*o[2]<0&&p.push({x:v,y:y+.5}),o[1]*o[3]<0&&p.push({x:v+1,y:y+.5}),o[2]*o[3]<0&&p.push({x:v+.5,y:y+1}),2===p.length&&(r.lineStyle(i,n).moveTo((p[0].x+.5)*t.gridSize,(p[0].y+.5)*t.gridSize).lineTo((p[1].x+.5)*t.gridSize,(p[1].y+.5)*t.gridSize),f.push(s.lineStyle(2*i,n).moveTo((p[0].x+.5)*t.gridSize,(p[0].y+.5)*t.gridSize).lineTo((p[1].x+.5)*t.gridSize,(p[1].y+.5)*t.gridSize))))}return f}}(this),e(1,2,65407),e(2,2,16744192),e(3,2,16723968),e(4,2,41215),e(5,2,20735),n=new PIXI.filters.BlurFilter,n.blur=32,a=this.team,o=0,u=a.length;u>o;o++)c=a[o],h=""+c.point,t=16777215,p=(c.base.x+.5)*this.gridSize,l=(c.base.y+.5)*this.gridSize,c.scoreborad=this.setupText(p,l,h,"36px Papyrus",t,"center","center"),c.scoreborad2=this.setupText(p,l,h,"36px Papyrus",c.color,"center","center"),c.scoreborad2.filters=[n],c.scoreborad.alpha=.7,c.scoreboradUpdate=function(t){return function(){var e;return e=t.gridSize,function(){return p=(this.base.x+.5)*e,l=(this.base.y+.5)*e,this.scoreborad.text=""+this.point,this.scoreborad2.text=this.scoreborad.text,this.scoreborad.position.x=p-this.scoreborad.width/2,this.scoreborad.position.y=l-this.scoreborad.height/2,this.scoreborad2.position=this.scoreborad.position}}}(this)(),r.addChild(c.scoreborad2),r.addChild(c.scoreborad);return r.blendMode=PIXI.BLEND_MODES.ADD,r.alpha=.7,s.filters=[i],r.addChild(s),r},t.prototype.setupBullet=function(t){var e,i,n,r;return e=new PIXI.Graphics,i=t.pos.x*this.gridSize,n=t.pos.y*this.gridSize,r=t.size*this.gridSize,e.lineStyle(1,this.team[t.team].color).drawCircle(0,0,r),e.position.x=i,e.position.y=n,e},t.prototype.setupUnit=function(t){var e,i,n,r,s,o,u,a,h,c,p;return e=new PIXI.Graphics,i=t.pos.x*this.gridSize,n=t.pos.y*this.gridSize,p=t.size*this.gridSize,r=p,s=0,c=-150*Math.PI/180,o=p*Math.cos(c),u=p*Math.sin(c),c=150*Math.PI/180,a=p*Math.cos(c),h=p*Math.sin(c),e.lineStyle(2,this.team[t.team].color).moveTo(r,s).lineTo(o,u).lineTo(0,0).lineTo(a,h).lineTo(r,s),t.scoreborad=this.setupText(i+1.4*p,n-1.4*p,""+t.hp,"14px Papyrus",16777215,"center","center"),t.scoreboradUpdate=function(t){return function(){var e;return e=t.gridSize,function(){return i=this.pos.x*e,n=this.pos.y*e,p=this.size*e,this.scoreborad.text=""+this.hp,this.scoreborad.position.x=i+1.4*p,this.scoreborad.position.y=n-1.4*p}}}(this)(),this.container.addChild(t.scoreborad),e.position.x=i,e.position.y=n,e.rotation=t.ang*Math.PI/180,e},t.prototype.updateUnits=function(){var t,e,i,n,r,s,o,u,a,h,c;for(u=this.team,a=[],e=0,i=u.length;i>e;e++)h=u[e],a.push(function(){var e,i,u,a,p,l,f,d,v,y;for(f=h.units,y=[],e=0,i=f.length;i>e;e++){for(c=f[e],c.i.update(function(t){return function(e){return t.addBullet(e)}}(this)),this.fix(c.i),d=this.team,p=0,u=d.length;u>p;p++)if(h=d[p],c.i.team!==h.id)for(n=c.i.pos,s=c.i.size/2,v=h.bullets,l=0,a=v.length;a>l;l++)t=v[l],r=t.i.pos,o=t.i.size,Math.pow(n.x-r.x,2)+Math.pow(n.y-r.y,2)<Math.pow(s+o,2)&&(t.i.removeflag=!0,c.i.hp--,c.i.scoreboradUpdate());c.g.position.x=c.i.pos.x*this.gridSize,c.g.position.y=c.i.pos.y*this.gridSize,y.push(c.g.rotation=c.i.ang*Math.PI/180)}return y}.call(this));return a},t.prototype.updateBullets=function(){var t,e,i,n,r,s,o,u,a,h,c,p,l,f,d,v,y,m,g,b,w;for(d=this.team,g=[],r=0,o=d.length;o>r;r++){for(b=d[r],m=[],v=b.bullets,n=s=0,u=v.length;u>s;n=++s){for(t=v[n],t.i.update(),f=t.i.getCollider(),c=0,a=f.length;a>c;c++)if(l=f[c],y=this.hitCheck(l.x,l.y),e=y.d,i=y.f,0>e)for(t.i.removeflag=!0,p=0,h=i.length;h>p;p++)switch(w=i[p]){case 2:if(0===t.i.team)break;this.team[0].changePoint(-1);break;case 4:if(1===t.i.team)break;this.team[0].changePoint(-1)}t.g.position.x=t.i.pos.x*this.gridSize,t.g.position.y=t.i.pos.y*this.gridSize,t.g.rotation=t.i.rad,t.i.removeflag&&(m.push(n),this.container.removeChild(t.g))}g.push(_.remove(b.bullets,function(t,e){return m.some(function(t){return t===e})}))}return g},t.prototype.update=function(){return this.input.keys.esc&&location.reload(),this.phase()},t}(),e.exports=h},{"./brain/human":6,"./brain/standard":7,"./bullet":8,"./input":9,"./team":12,"./unit":13,"./util":14,path:1}],4:[function(t,e,i){e.exports={IDOL:0,MOVE:{TOP:1,BOTTOM:2,LEFT:3,RIGHT:4},ATTACK:{AIM:5,FOWARD:6}}},{}],5:[function(t,e,i){var n;n=function(){function t(){}return t.prototype.update=function(t){},t}(),e.exports=n},{}],6:[function(t,e,i){var n,r,s,o=function(t,e){function i(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},u={}.hasOwnProperty;r=t("../brain"),n=t("../actions"),s=function(t){function e(t){this.input=t,e.__super__.constructor.call(this)}return o(e,t),e.prototype.update=function(t){var i;return e.__super__.update.call(this,t),i=[],this.input.keys.up&&i.push(n.MOVE.TOP),this.input.keys.down&&i.push(n.MOVE.BOTTOM),this.input.keys.right&&i.push(n.MOVE.RIGHT),this.input.keys.left&&i.push(n.MOVE.LEFT),this.input.keys.z&&i.push(n.ATTACK.AIM),i},e}(r),e.exports=s},{"../actions":4,"../brain":5}],7:[function(t,e,i){var n,r,s,o,u=function(t,e){function i(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=t("../util"),r=t("../brain"),n=t("../actions"),s=function(t){function e(){e.__super__.constructor.call(this)}return u(e,t),e.prototype.update=function(t){var i;return e.__super__.update.call(this,t),i=[],i.push(o.randArray([n.MOVE.TOP,n.MOVE.BOTTOM,n.MOVE.LEFT,n.MOVE.RIGHT])),o.rand(5)||i.push(n.ATTACK.AIM),i},e}(r),e.exports=s},{"../actions":4,"../brain":5,"../util":14}],8:[function(t,e,i){var n;n=function(){function t(t,e,i,n,r){this.pos=t,this.size=e,this.vel=n,this.parent=r,this.rad=i*Math.PI/180,this.team=this.parent.team,this.r=0}return t.prototype.getCollider=function(){var t;return t=[],t.push({x:this.pos.x,y:this.pos.y}),t},t.prototype.update=function(){return this.pos.x+=this.vel*Math.cos(this.rad),this.pos.y+=this.vel*Math.sin(this.rad),this.r+=this.vel},t}(),e.exports=n},{}],9:[function(t,e,i){var n,r=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1},s={}.hasOwnProperty;n=function(){function t(t){var e,i,n,o,u,a,h,c,p;this.domElement=null!=t?t:document,this.keys={},this.listener={},this.keyMap={8:"backspace",13:"enter",16:"shift",17:"ctrl",18:"alt",27:"esc",32:"space",37:"left",38:"up",39:"right",40:"down"},o=function(t){return function(e,i){return{key:t.keyMap[e]||String.fromCharCode(e).toLowerCase(),status:i}}}(this),i=Bacon.fromEventTarget(this.domElement,"keydown").map(function(t){return function(e){return o.call(t,e.keyCode,!0)}}(this)),n=Bacon.fromEventTarget(this.domElement,"keyup").map(function(t){return function(e){return o.call(t,e.keyCode,!1)}}(this)),i.merge(n).filter(function(t){var e;return e=t.key.charCodeAt(0),e>47&&58>e||e>96&&123>e}).onValue(function(t){return function(e){var i;return t.keys[e.key]=e.status,e.status&&null!=(i=t.listener[e.key])?i.forEach(function(t){return t()}):void 0}}(this)),e=[1,2],u=function(t){return function(i){var n;return n={},e.forEach(function(t){return n[t]=[]}),Bacon.fromEventTarget(t.domElement,i).filter(function(t){var i;return i=t.button,r.call(e,i)>=0}).onValue(function(t){return n[t.button].forEach(function(e){return e(t.clientX,t.clientY)})}),[function(t,e){var i;return null!=(i=n[t])?i.push(e):void 0},function(t,e){return _.remove(n[t],function(t){return null!=e?t===e:!0})}]}}(this),a=u("mousedown"),this.onMouseDown=a[0],this.offMouseDown=a[1],h=u("mouseup"),this.onMouseUp=h[0],this.offMouseUp=h[1],c=_.transform(u("dblclick"),function(t,e){return t.push(e.bind(this,1))}),this.onDoubleClick=c[0],this.offDoubleClick=c[1],p=function(t){return function(){var i,n,r,o;return n={},i={},e.forEach(function(t){return i[t]=!1,n[t]=[]}),r=Bacon.fromEventTarget(t.domElement,"mousedown").map(function(t){return[t.button,!0]}),o=Bacon.fromEventTarget(t.domElement,"mouseup").map(function(t){return[t.button,!1]}),r.merge(o).onValue(function(t){return null!=i[t[0]]?i[t[0]]=t[1]:void 0}),Bacon.fromEventTarget(t.domElement,"mousemove").onValue(function(t){var e,r,o;r=[];for(e in n)s.call(n,e)&&(o=n[e],r.push(o.forEach(function(n){return i[e]?n(t.clientX,t.clientY):void 0})));return r}),[function(t,e){var i;return null!=(i=n[t])?i.push(e):void 0},function(t,e){return _.remove(n[t],function(t){return null!=e?t===e:!0})}]}}(this)(),this.onMouseMove=p[0],this.offMouseMove=p[1],this.offAll=function(t){return function(){return e.forEach(function(e){return t.offMouseDown(e),t.offMouseUp(e),t.offMouseMove(e)}),t.offDoubleClick(),t.listener={}}}(this)}return t.prototype.on=function(t,e){return this.listener[t]?this.listener[t].push(e):this.listener[t]=[e]},t.prototype.off=function(t,e){return _.remove(this.listener[t],function(t){return t===e})},t}(),e.exports=n},{}],10:[function(t,e,i){"use strict";var n,r,s;r=t("./view"),s=t("./World"),n=function(){function t(){this.view=new r,this.world=new s(this.view.container,this.view.size)}return t.prototype.loop=function(){return requestAnimationFrame(function(t){return function(){return t.loop()}}(this)),this.view.render(function(t){return function(){return t.world.update()}}(this))},t}(),$(function(){return(new n).loop()})},{"./World":3,"./view":15}],11:[function(t,e,i){e.exports={INIT:0,READY:1,ACTIVE:2,DEAD:3}},{}],12:[function(t,e,i){var n;n=function(){function t(t,e,i,n,r){this.id=t,this.base=e,this.core=i,this.color=n,this.point=null!=r?r:100,this.units=[],this.bullets=[]}return t.prototype.changePoint=function(t){return this.point+=t,this.point=Math.max(0,this.point),this.scoreboradUpdate()},t.prototype.eachMembers=function(t){var e,i,n,r,s;for(n=this.units,r=[],e=0,i=n.length;i>e;e++)s=n[e],r.push(t(s));return r},t}(),e.exports=n},{}],13:[function(t,e,i){var n,r,s,o;n=t("./actions"),r=t("./status"),o=t("./util"),s=function(){function t(t,e,i){this.team=t,this.base=e,this.brain=i,this.pos={x:0,y:0},this.ang=this.team%2?180:0,this.shotang=0,this.hp=10,this.size=.2,this.vel=0,this.shotInterval=0,this.status=r.ACTIVE,this.respawnCount=0}return t.prototype.getCollider=function(){var t,e;return t=[],e=this.ang*Math.PI/180,t.push({x:this.pos.x+this.size*Math.cos(e),y:this.pos.y+this.size*Math.sin(e)}),t},t.prototype.action=function(t,e){var i,r,s,o,u,a,h;for(a=0,r=!1,h=!1,s=[void 0,-90,90,void 0,180,-135,135,180,0,-45,45,0,void 0,-90,90,void 0],o=0,u=t.length;u>o;o++)switch(i=t[o]){case n.MOVE.TOP:a+=1;break;case n.MOVE.BOTTOM:a+=2;break;case n.MOVE.LEFT:a+=4;break;case n.MOVE.RIGHT:a+=8;break;case n.ATTACK.AIM:r=!0,h=!0;break;case n.ATTACK.FOWARD:h=!0}return null!=s[a]?(this.ang=s[a],this.vel=r?.04:.07):this.vel=0,this.shotang=this.ang,this.shotInterval>0&&this.shotInterval--,h&&0===this.shotInterval?(this.shotInterval=20,e(this)):void 0},t.prototype.update=function(t){var e;switch(this.status){case r.READY:0===this.respawnCount?(this.status=r.ACTIVE,this.pos.x=this.base.x+o.randf(1),this.pos.y=this.base.y+o.randf(1),this.hp=10,this.ang=this.team%2?180:0):this.respawnCount--;break;case r.ACTIVE:this.action(this.brain.update(this),t),e=this.ang*Math.PI/180,this.pos.x+=this.vel*Math.cos(e),this.pos.y+=this.vel*Math.sin(e),this.vel=.7*this.vel,this.vel*this.vel<1e-4&&(this.vel=0),this.hp<=0&&(this.status=r.DEAD);break;case r.DEAD:this.pos.x=-100,this.pos.y=-100,this.status=r.READY,this.respawnCount=180}return this.scoreboradUpdate()},t}(),e.exports=s},{"./actions":4,"./status":11,"./util":14}],14:[function(t,e,i){var n;n=function(){function t(){}return t.rand=function(t){return Math.floor(Math.random()*t)},t.randf=function(t){return Math.random()*t},t.randRange=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},t.randArray=function(t){return t[Math.floor(Math.random()*t.length)]},t}(),e.exports=n},{}],15:[function(t,e,i){var n;n=function(){function t(){this.size=640,this.renderer=PIXI.autoDetectRenderer(this.size,this.size,{backgroundColor:0,antialias:!0}),$(document.body).append(this.renderer.view),this.container=new PIXI.Container,this.stats=new Stats,this.stats.setMode(0),this.stats.domElement.style.position="absolute",this.stats.domElement.style.right="0px",this.stats.domElement.style.top="0px",$(document.body).append(this.stats.domElement)}return t.prototype.render=function(t){return this.stats.begin(),t(),this.renderer.render(this.container),this.stats.end()},t}(),e.exports=n},{}]},{},[10]);
//# sourceMappingURL=bundle.js.map